

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>msi_filtering Package &mdash; BASTet: Berkeley Analysis and Storage Toolkit Documentation devel documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="BASTet: Berkeley Analysis and Storage Toolkit Documentation devel documentation" href="index.html"/>
        <link rel="up" title="analysis Package" href="omsi.analysis.html"/>
        <link rel="next" title="compound_stats Package" href="omsi.analysis.compound_stats.html"/>
        <link rel="prev" title="multivariate_stats Package" href="omsi.analysis.multivariate_stats.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> BASTet: Berkeley Analysis and Storage Toolkit Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="convert_files.html">Converting and Files and Making them Accessible</a><ul>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#converting-an-msi-file-at-nersc">Converting an MSI file at NERSC</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#making-a-converted-file-accessible-to-openmsi-private">Making a converted file accessible to OpenMSI (Private)</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#changing-file-permissions">Changing file permissions:</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#converttoomsi-usage-and-options"><code class="docutils literal"><span class="pre">convertToOMSI</span></code>: Usage and Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_filereader.html">Integrating new file formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_filereader.html#developing-a-file-reader">Developing a file reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_filereader.html#integrating-the-file-reader-with-openmsi">Integrating the file reader with OpenMSI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_analysis.html">Developing a new Analysis for BASTet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#wrapping-a-function-the-quick-and-dirty-way">Wrapping a function: The quick-and-dirty way</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#writing-a-new-analysis-class-for-bastet-part-1-overview">Writing a new analysis class for BASTet &#8211; Part 1: Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#writing-a-new-analysis-class-for-bastet-part-2-analysis-template">Writing a new analysis class for BASTet &#8211; Part 2: Analysis Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#writing-a-new-analysis-class-for-bastet-part-3-customizing-core-features">Writing a new analysis class for BASTet &#8211; Part 3: Customizing core features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_workflows.html">Defining and Executing Analysis Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-1-create-the-analysis-tasks">Step 1: Create the analysis tasks:</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-2-define-analysis-inputs">Step 2: Define analysis inputs:</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-3-execute">Step 3: Execute</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#example-normalizing-an-image">Example: Normalizing an image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_workflows.html#workflow-tools">Workflow Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#workflow-scripts">Workflow Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer_notes.html">Developer Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer_notes.html#building-the-online-documentation">Building the online documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDF5_format.html">OMSI Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#data-layout">Data Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#accessing-omsi-data-files">Accessing OMSI data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#convert-mass-spectrometry-imaging-data-to-omsi-hdf5-format">Convert Mass Spectrometry Imaging Data to OMSI (HDF5) format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDF5_format_performance.html">HDF5 I/O Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#test-platforms">Test Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#test-cases">Test Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#dataset-layout">Dataset Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#chunking-part-1">Chunking: Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#chunking-part-2">Chunking: Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#compression">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#local-scalability-multi-processing">Local Scalability: Multi-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#discussion">Discussion</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="omsi.html">omsi Package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="omsi.html#subpackages">Subpackages</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">BASTet: Berkeley Analysis and Storage Toolkit Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="omsi.html">omsi Package</a> &raquo;</li>
      
          <li><a href="omsi.analysis.html">analysis Package</a> &raquo;</li>
      
    <li>msi_filtering Package</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/omsi.analysis.msi_filtering.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="msi-filtering-package">
<h1>msi_filtering Package<a class="headerlink" href="#msi-filtering-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><code class="xref py py-mod docutils literal"><span class="pre">msi_filtering</span></code> Package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-omsi.analysis.msi_filtering"></span><p>Module with third-party modules, functions, classes
used by some of the analysis modules in the containing
package.</p>
<dl class="class">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm">
<em class="property">class </em><code class="descclassname">omsi.analysis.msi_filtering.</code><code class="descname">omsi_tic_norm</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.analysis.html#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>TIC Normalization analysis.</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.execute_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the data based on the total intensity of a spectrum or the
intensities of a select set of ions.</p>
<p>Calculations are performed using a memory map approach to avoid loading
all data into memory. TIC normalization can as such be performed even
on large files (assuming sufficient disk space).</p>
<p>Keyword Arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>msidata</strong> (<em>h5py.dataset or numpu array (3D)</em>) &#8211; The input MSI dataset</li>
<li><strong>mzdata</strong> &#8211; The mz axsis do the dataset</li>
<li><strong>maxCount</strong> &#8211; <p>...</p>
</li>
<li><strong>mzTol</strong> &#8211; <p>...</p>
</li>
<li><strong>infIons</strong> &#8211; List of informative ions</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.record_execute_analysis_outputs">
<code class="descname">record_execute_analysis_outputs</code><span class="sig-paren">(</span><em>analysis_output</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.record_execute_analysis_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>We are not returning any outputs here, but we are going to record them manually.
:param analysis_output: The output of the execute_analysis(...) function.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.v_qmz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.v_qslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer. Slicing will
be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.v_qslice_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For
most cases this is not needed here as the support for slice operations is usually a static
decision based on the class type, however, in some cases additional checks may be needed (e.g.,
ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty if
the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.v_qspectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<dl class="docutils">
<dt>Developer Note: h5py currently supports only a single index list. If the user provides an index-list for both</dt>
<dd>x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
multiple lists in the selection.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elements are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be the last                   axis. For index selection x=1,y=1 a 1D array is usually expected. For indexList selections                   x=[0]&amp;y=[1] usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we one usually                  expects a 3D array/</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum.                  Otherwise, return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z                  values are needed for interpretation of the returned spectrum).This may be needed, e.g., in                  cases where a per-spectrum peak analysis is performed and the peaks for each spectrum appear                  at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.v_qspectrum_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param analysis_object:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The omsi_file_analysis object for which slicing should be performed.  For most cases
this is not needed here as the support for slice operations is usually a static decission based
on the class type, however, in some cases additional checks may be needed (e.g., ensure that
the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qspectrum requests (i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-omsi.analysis.msi_filtering.omsi_tic_norm">
<span id="omsi-tic-norm-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">omsi_tic_norm</span></code> Module<a class="headerlink" href="#module-omsi.analysis.msi_filtering.omsi_tic_norm" title="Permalink to this headline">¶</a></h2>
<p>Module with the TIC normalization analysis.</p>
<dl class="class">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm">
<em class="property">class </em><code class="descclassname">omsi.analysis.msi_filtering.omsi_tic_norm.</code><code class="descname">omsi_tic_norm</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.analysis.html#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>TIC Normalization analysis.</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.execute_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the data based on the total intensity of a spectrum or the
intensities of a select set of ions.</p>
<p>Calculations are performed using a memory map approach to avoid loading
all data into memory. TIC normalization can as such be performed even
on large files (assuming sufficient disk space).</p>
<p>Keyword Arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>msidata</strong> (<em>h5py.dataset or numpu array (3D)</em>) &#8211; The input MSI dataset</li>
<li><strong>mzdata</strong> &#8211; The mz axsis do the dataset</li>
<li><strong>maxCount</strong> &#8211; <p>...</p>
</li>
<li><strong>mzTol</strong> &#8211; <p>...</p>
</li>
<li><strong>infIons</strong> &#8211; List of informative ions</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.record_execute_analysis_outputs">
<code class="descname">record_execute_analysis_outputs</code><span class="sig-paren">(</span><em>analysis_output</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.record_execute_analysis_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>We are not returning any outputs here, but we are going to record them manually.
:param analysis_output: The output of the execute_analysis(...) function.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qmz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer. Slicing will
be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qslice_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For
most cases this is not needed here as the support for slice operations is usually a static
decision based on the class type, however, in some cases additional checks may be needed (e.g.,
ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty if
the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qspectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<dl class="docutils">
<dt>Developer Note: h5py currently supports only a single index list. If the user provides an index-list for both</dt>
<dd>x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
multiple lists in the selection.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elements are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be the last                   axis. For index selection x=1,y=1 a 1D array is usually expected. For indexList selections                   x=[0]&amp;y=[1] usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we one usually                  expects a 3D array/</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum.                  Otherwise, return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z                  values are needed for interpretation of the returned spectrum).This may be needed, e.g., in                  cases where a per-spectrum peak analysis is performed and the peaks for each spectrum appear                  at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.omsi_tic_norm.omsi_tic_norm.v_qspectrum_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param analysis_object:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The omsi_file_analysis object for which slicing should be performed.  For most cases
this is not needed here as the support for slice operations is usually a static decission based
on the class type, however, in some cases additional checks may be needed (e.g., ensure that
the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qspectrum requests (i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="msi-filtering-third-party-package">
<h1>msi_filtering.third_party Package<a class="headerlink" href="#msi-filtering-third-party-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2><code class="xref py py-mod docutils literal"><span class="pre">msi_filtering.third_party</span></code> Package<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-omsi.analysis.msi_filtering.third_party"></span><p>Package containing shared third-party code modules included here to reduce the need for external
dependencies when only small parts of external code are used.</p>
</div>
</div>
<div class="section" id="msi-filtering-experimental-package">
<h1>msi_filtering.experimental Package<a class="headerlink" href="#msi-filtering-experimental-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id3">
<h2><code class="xref py py-mod docutils literal"><span class="pre">msi_filtering.experimental</span></code> Package<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-omsi.analysis.msi_filtering.experimental"></span><p>Module with experimental analysis code, i.e., code that is
not (yet) used in production but is under development.
Often this is code that is used in a specific research.</p>
</div>
<div class="section" id="module-omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask">
<span id="omsi-filter-by-mask-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">omsi_filter_by_mask</span></code> Module<a class="headerlink" href="#module-omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask" title="Permalink to this headline">¶</a></h2>
<p>Module for performing masking for MSI data.</p>
<dl class="class">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask">
<em class="property">class </em><code class="descclassname">omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.</code><code class="descname">omsi_filter_by_mask</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.analysis.html#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class defining a basic mask creation a 2D MSI data file or slice of the data</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.execute_analysis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qmz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for
a given analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer.
Slicing will be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qslice_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.
For most cases this is not needed here as the support for slice operations is usually a
static decision based on the class type, however, in some cases additional checks may be
needed (e.g., ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be
empty if the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qspectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<dl class="docutils">
<dt>Developer Note: h5py currently supports only a single index list. If the user provides an index-list for both</dt>
<dd>x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
mulitple lists in the selection.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elemnts are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be the last axis.                For index selection x=1,y=1 a 1D array is usually expected. For indexList selections x=[0]&amp;y=[1]                usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we one usually expects a 3D array.</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum. Otherwise,                return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z values are needed                for interpretation of the returned spectrum).This may be needed, e.g., in cases where a per-spectrum                peak analysis is performed and the peaks for each spectrum appear at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask.omsi_filter_by_mask.v_qspectrum_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the dependencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param analysis_object:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The omsi_file_analysis object for which slicing should be performed.
For most cases this is not needed here as the support for slice operations is usually a
static decission based on the class type, however, in some cases additional checks
may be needed (e.g., ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should
be empty if the analysis does not support qspectrum requests
(i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster">
<span id="omsi-mask-by-cluster-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">omsi_mask_by_cluster</span></code> Module<a class="headerlink" href="#module-omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster" title="Permalink to this headline">¶</a></h2>
<p>Module for performing making a mask from cluster matrix for MSI data.</p>
<dl class="class">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster">
<em class="property">class </em><code class="descclassname">omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.</code><code class="descname">omsi_mask_by_cluster</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.analysis.html#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class defining a basic mask creation a 2D MSI data file or slice of the data</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.execute_analysis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qmz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qslice" title="Permalink to this definition">¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for
a given analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer.
Slicing will be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qslice_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.
For most cases this is not needed here as the support for slice operations is usually a
static decision based on the class type, however, in some cases additional checks may be
needed (e.g., ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be
empty if the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qspectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<dl class="docutils">
<dt>Developer Note: h5py currently supports only a single index list. If the user provides an index-list for both</dt>
<dd>x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
mulitple lists in the selection.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elemnts are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be the last axis.                For index selection x=1,y=1 a 1D array is usually expected. For indexList selections x=[0]&amp;y=[1]                usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we one usually expects a 3D array.</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum. Otherwise,                return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z values are needed                for interpretation of the returned spectrum).This may be needed, e.g., in cases where a per-spectrum                peak analysis is performed and the peaks for each spectrum appear at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster.omsi_mask_by_cluster.v_qspectrum_viewer_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the dependencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param analysis_object:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The omsi_file_analysis object for which slicing should be performed.
For most cases this is not needed here as the support for slice operations is usually a
static decission based on the class type, however, in some cases additional checks
may be needed (e.g., ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should
be empty if the analysis does not support qspectrum requests
(i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="omsi.analysis.compound_stats.html" class="btn btn-neutral float-right" title="compound_stats Package">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="omsi.analysis.multivariate_stats.html" class="btn btn-neutral" title="multivariate_stats Package"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Oliver Rübel and Ben Bowen.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'devel',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>