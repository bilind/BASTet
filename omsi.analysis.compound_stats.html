

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>compound_stats Package &mdash; BASTet: Berkeley Analysis and Storage Toolkit Documentation 2.0.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="BASTet: Berkeley Analysis and Storage Toolkit Documentation 2.0.0 documentation" href="index.html"/>
        <link rel="up" title="analysis Package" href="omsi.analysis.html"/>
        <link rel="next" title="dataformat Package" href="omsi.dataformat.html"/>
        <link rel="prev" title="msi_filtering Package" href="omsi.analysis.msi_filtering.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> BASTet: Berkeley Analysis and Storage Toolkit Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#mass-spectrometry-imaging">Mass Spectrometry Imaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#openmsi-science-gateway">OpenMSI: Science Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#openmsi-software-infrastructure">OpenMSI: Software Infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="convert_files.html">Converting and Files and Making them Accessible</a><ul>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#converting-an-msi-file-at-nersc">Converting an MSI file at NERSC</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#making-a-converted-file-accessible-to-openmsi-private">Making a converted file accessible to OpenMSI (Private)</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#changing-file-permissions">Changing file permissions:</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#converttoomsi-usage-and-options"><code class="docutils literal"><span class="pre">convertToOMSI</span></code>: Usage and Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_filereader.html">Integrating new file formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_filereader.html#developing-a-file-reader">Developing a file reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_filereader.html#integrating-the-file-reader-with-openmsi">Integrating the file reader with OpenMSI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_analysis.html">Developing a new Analysis for BASTet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#overview">Overview:</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#integrating-a-new-analysis-using-the-openmsi-analysis-template">Integrating a new Analysis using the OpenMSI Analysis Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#advanced-customizing-core-features">Advanced: Customizing core features</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#wrapping-a-function-the-quick-and-dirty-way">Wrapping a function: The quick-and-dirty way</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_workflows.html">Defining and Executing Analysis Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-1-create-the-analysis-tasks">Step 1: Create the analysis tasks:</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-2-define-analysis-inputs">Step 2: Define analysis inputs:</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-3-execute">Step 3: Execute</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#example-normalizing-an-image">Example: Normalizing an image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_workflows.html#workflow-tools">Workflow Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#workflow-scripts">Workflow Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDF5_format.html">OMSI Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#data-layout">Data Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#accessing-omsi-data-files">Accessing OMSI data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#convert-mass-spectrometry-imaging-data-to-omsi-hdf5-format">Convert Mass Spectrometry Imaging Data to OMSI (HDF5) format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDF5_format_performance.html">HDF5 I/O Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#test-platforms">Test Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#test-cases">Test Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#dataset-layout">Dataset Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#chunking-part-1">Chunking: Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#chunking-part-2">Chunking: Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#compression">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#local-scalability-multi-processing">Local Scalability: Multi-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#discussion">Discussion</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="omsi.html">omsi Package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="omsi.html#subpackages">Subpackages</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">BASTet: Berkeley Analysis and Storage Toolkit Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="omsi.html">omsi Package</a> &raquo;</li>
      
          <li><a href="omsi.analysis.html">analysis Package</a> &raquo;</li>
      
    <li>compound_stats Package</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/omsi.analysis.compound_stats.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="compound-stats-package">
<h1>compound_stats Package<a class="headerlink" href="#compound-stats-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><code class="xref py py-mod docutils literal"><span class="pre">compound_stats</span></code> Package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-omsi.analysis.compound_stats"></span><p>Package containing shared third-party code modules included here to reduce the need for external
dependencies when only small parts of external code are used.</p>
</div>
<div class="section" id="module-omsi.analysis.compound_stats.omsi_score_midas">
<span id="omsi-score-midas-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">omsi_score_midas</span></code> Module<a class="headerlink" href="#module-omsi.analysis.compound_stats.omsi_score_midas" title="Permalink to this headline">¶</a></h2>
<p>MIDAS spectrum analysis</p>
<dl class="class">
<dt id="omsi.analysis.compound_stats.omsi_score_midas.omsi_score_midas">
<em class="property">class </em><code class="descclassname">omsi.analysis.compound_stats.omsi_score_midas.</code><code class="descname">omsi_score_midas</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.compound_stats.omsi_score_midas.omsi_score_midas" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.analysis.html#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class for executing midas on an MSI or local peak finding dataset.</p>
<p>Initialize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.compound_stats.omsi_score_midas.omsi_score_midas.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><em>spectrum_indexes=None</em>, <em>compound_list=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.compound_stats.omsi_score_midas.omsi_score_midas.execute_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the local peak finder for the given msidata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>spectrum_indexes</strong> &#8211; List with a list of integer indicies of the subset of sepctra
that should be processed by this MPI task.  If spectrum_indexes is set, then the given
subblock will be processed in SERIAL instead of processing self[&#8216;fpl_data&#8217;] in PARALLEL
(if available). This parameter is strictly optional and intended for internal use only
to facilitate the efficient parallel implementation.</li>
<li><strong>compound_list</strong> &#8211; List of the compounds from the database file. This parameter is used
to avoid having to read the compound database on every compute task that calls this function
when running in parallel.  This  parameter is strictly optional and intended for internal
use only to facilitate the efficient parallel implementation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>A tuple with an array of hit_tables with the scores for each pixel and a 2D array
of pixel indices describing for each spectrum the (x,y) pixel location in the image. The
hit_table is an array of (#spectra x #compounds). The hit_table is a structured numpy
array with the following columns:</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;score&#8217;,  float,  MIDAS score of row</li>
<li>&#8216;id&#8217;,     str,    database ID e.g. &#8216;MetaCyC_7884&#8217;</li>
<li>&#8216;name&#8217;,   str,    database name, e.g. &#8216;glycine&#8217;</li>
<li>&#8216;mass&#8217;,   float,  mass in Da of IDed compound</li>
<li>&#8216;n_peaks&#8217;, int,   number of peaks in data</li>
<li>&#8216;n_match&#8217;, int,   number of peaks in data matched</li>
</ul>
</div></blockquote>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-omsi.analysis.compound_stats.omsi_score_pactolus">
<span id="omsi-score-pactolus-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">omsi_score_pactolus</span></code> Module<a class="headerlink" href="#module-omsi.analysis.compound_stats.omsi_score_pactolus" title="Permalink to this headline">¶</a></h2>
<p>MIDAS spectrum analysis</p>
<dl class="class">
<dt id="omsi.analysis.compound_stats.omsi_score_pactolus.omsi_score_pactolus">
<em class="property">class </em><code class="descclassname">omsi.analysis.compound_stats.omsi_score_pactolus.</code><code class="descname">omsi_score_pactolus</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.compound_stats.omsi_score_pactolus.omsi_score_pactolus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.analysis.html#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class for executing Pactolus on a local peak finding dataset.</p>
<p>Initialize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.compound_stats.omsi_score_pactolus.omsi_score_pactolus.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><em>spectrum_indexes=None</em>, <em>file_lookup_table=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.compound_stats.omsi_score_pactolus.omsi_score_pactolus.execute_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the local peak finder for the given msidata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>spectrum_indexes</strong> &#8211; List with a list of integer indicies of the subset of sepctra
that should be processed by this MPI task.  If spectrum_indexes is set, then the given
subblock will be processed in SERIAL instead of processing self[&#8216;fpl_data&#8217;] in PARALLEL
(if available). This parameter is strictly optional and intended for internal use only
to facilitate the efficient parallel implementation.</li>
<li><strong>file_lookup_table</strong> &#8211; The Pactolus lookup table with the list of tree files and their mass.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>A series of numpy arrays  with the score data for each pixel and a 2D array
of pixel indices describing for each spectrum the (x,y) pixel location in the image.</p>
<dl class="docutils">
<dt>[&#8216;pixel_index&#8217;, &#8216;score&#8217;, &#8216;id&#8217;, &#8216;name&#8217;, &#8216;mass&#8217;, &#8216;n_peaks&#8217;, &#8216;n_match&#8217;]</dt>
<dd><ul class="first last simple">
<li>&#8216;pixel_index&#8217;  , int,  2D array of pixel indices describing for each spectrum                    the (x,y) pixel location in the imag</li>
<li>&#8216;score&#8217;,  float,  MIDAS score of row</li>
<li>&#8216;id&#8217;,     str,    database ID e.g. &#8216;MetaCyC_7884&#8217;</li>
<li>&#8216;name&#8217;,   str,    database name, e.g. &#8216;glycine&#8217;</li>
<li>&#8216;mass&#8217;,   float,  mass in Da of IDed compound</li>
<li>&#8216;n_peaks&#8217;, int,   number of peaks in data</li>
<li>&#8216;n_match&#8217;, int,   number of peaks in data matched</li>
</ul>
</dd>
</dl>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="compound-stats-third-party-package">
<h1>compound_stats.third_party Package<a class="headerlink" href="#compound-stats-third-party-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2><code class="xref py py-mod docutils literal"><span class="pre">compound_stats.third_party</span></code> Package<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-omsi.analysis.compound_stats.third_party"></span><p>Package containing shared third-party code modules included here to reduce the need for external
dependencies when only small parts of external code are used.</p>
</div>
</div>
<div class="section" id="compound-stats-experimental-package">
<h1>compound_stats.experimental Package<a class="headerlink" href="#compound-stats-experimental-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id3">
<h2><code class="xref py py-mod docutils literal"><span class="pre">compound_stats.experimental</span></code> Package<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-omsi.analysis.compound_stats.experimental"></span><p>Module with experimental analysis code, i.e., code that is
not (yet) used in production but is under development.
Often this is code that is used in a specific research.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="omsi.dataformat.html" class="btn btn-neutral float-right" title="dataformat Package">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="omsi.analysis.msi_filtering.html" class="btn btn-neutral" title="msi_filtering Package"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Oliver Rübel and Ben Bowen.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>