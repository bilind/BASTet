

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>analysis Package &mdash; BASTet: Berkeley Analysis and Storage Toolkit Documentation devel documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="BASTet: Berkeley Analysis and Storage Toolkit Documentation devel documentation" href="index.html"/>
        <link rel="up" title="omsi Package" href="omsi.html"/>
        <link rel="next" title="findpeaks Package" href="omsi.analysis.findpeaks.html"/>
        <link rel="prev" title="omsi Package" href="omsi.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> BASTet: Berkeley Analysis and Storage Toolkit Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="convert_files.html">Converting and Files and Making them Accessible</a><ul>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#converting-an-msi-file-at-nersc">Converting an MSI file at NERSC</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#making-a-converted-file-accessible-to-openmsi-private">Making a converted file accessible to OpenMSI (Private)</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#changing-file-permissions">Changing file permissions:</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert_files.html#converttoomsi-usage-and-options"><code class="docutils literal"><span class="pre">convertToOMSI</span></code>: Usage and Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_filereader.html">Integrating new file formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_filereader.html#developing-a-file-reader">Developing a file reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_filereader.html#integrating-the-file-reader-with-openmsi">Integrating the file reader with OpenMSI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_analysis.html">Developing a new Analysis for BASTet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#wrapping-a-function-the-quick-and-dirty-way">Wrapping a function: The quick-and-dirty way</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#writing-a-new-analysis-class-for-bastet-part-1-overview">Writing a new analysis class for BASTet &#8211; Part 1: Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#writing-a-new-analysis-class-for-bastet-part-2-analysis-template">Writing a new analysis class for BASTet &#8211; Part 2: Analysis Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_analysis.html#writing-a-new-analysis-class-for-bastet-part-3-customizing-core-features">Writing a new analysis class for BASTet &#8211; Part 3: Customizing core features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_workflows.html">Defining and Executing Analysis Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-1-create-the-analysis-tasks">Step 1: Create the analysis tasks:</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-2-define-analysis-inputs">Step 2: Define analysis inputs:</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#step-3-execute">Step 3: Execute</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#example-normalizing-an-image">Example: Normalizing an image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_workflows.html#workflow-tools">Workflow Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_workflows.html#workflow-scripts">Workflow Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer_notes.html">Developer Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developer_notes.html#building-the-online-documentation">Building the online documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDF5_format.html">OMSI Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#data-layout">Data Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#accessing-omsi-data-files">Accessing OMSI data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format.html#convert-mass-spectrometry-imaging-data-to-omsi-hdf5-format">Convert Mass Spectrometry Imaging Data to OMSI (HDF5) format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HDF5_format_performance.html">HDF5 I/O Performance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#test-platforms">Test Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#test-cases">Test Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#dataset-layout">Dataset Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#chunking-part-1">Chunking: Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#chunking-part-2">Chunking: Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#compression">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#local-scalability-multi-processing">Local Scalability: Multi-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="HDF5_format_performance.html#discussion">Discussion</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="omsi.html">omsi Package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="omsi.html#subpackages">Subpackages</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">BASTet: Berkeley Analysis and Storage Toolkit Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="omsi.html">omsi Package</a> &raquo;</li>
      
    <li>analysis Package</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/omsi.analysis.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="analysis-package">
<h1>analysis Package<a class="headerlink" href="#analysis-package" title="Permalink to this headline">Â¶</a></h1>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#module-omsi.analysis" title="omsi.analysis"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis</span></code></a></td>
<td>Package containing the base classes that facilitate the integration of new analysis with the BASTet software stack (e.g, the file format) and collection of specific analysis functionality.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#module-omsi.analysis.base" title="omsi.analysis.base"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.base</span></code></a></td>
<td>Module specifying the base analysis API for integrating new analysis with the toolkit and the OpenMSI science gateway.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#module-omsi.analysis.generic" title="omsi.analysis.generic"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.generic</span></code></a></td>
<td>Generic analysis class used to represent analyses of unknown type, e.g., when loading a custom user-defined analysis from file for which the indicate class may not be available with the local installation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#module-omsi.analysis.analysis_views" title="omsi.analysis.analysis_views"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.analysis_views</span></code></a></td>
<td>Helper module with functions and classes for interfacing with different analysis algorithms.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="omsi.analysis.compound_stats.html#module-omsi.analysis.compound_stats" title="omsi.analysis.compound_stats"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.compound_stats</span></code></a></td>
<td>Package containing shared third-party code modules included here to reduce the need for external dependencies when only small parts of external code are used.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.compound_stats.omsi_score_compounds</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks" title="omsi.analysis.findpeaks"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.findpeaks</span></code></a></td>
<td>Package of peak-finding related analysis modules.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="omsi.analysis.msi_filtering.html#module-omsi.analysis.msi_filtering" title="omsi.analysis.msi_filtering"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.msi_filtering</span></code></a></td>
<td>Module with third-party modules, functions, classes used by some of the analysis modules in the containing package.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="omsi.analysis.multivariate_stats.html#module-omsi.analysis.multivariate_stats" title="omsi.analysis.multivariate_stats"><code class="xref py py-obj docutils literal"><span class="pre">omsi.analysis.multivariate_stats</span></code></a></td>
<td>Multivariate statistics analysis</td>
</tr>
</tbody>
</table>
<div class="section" id="id1">
<h2><code class="xref py py-mod docutils literal"><span class="pre">analysis</span></code> Package<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h2>
<span class="target" id="module-omsi.analysis"></span><p>Package containing the base classes that facilitate the integration of new analysis with the BASTet software
stack (e.g, the file format) and collection of specific analysis functionality.</p>
<dl class="class">
<dt id="omsi.analysis.analysis_data">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">analysis_data</code><span class="sig-paren">(</span><em>name='undefined'</em>, <em>data=None</em>, <em>dtype='float32'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dict</span></code></p>
<p>Define an output dataset for the analysis that should be written to the omsi HDF5 file</p>
<p>The class can be used like a dictionary but restricts the set of keys that can be used
to the following required keys which should be provided during initalization.</p>
<p><strong>Required Keyword Arguments</strong>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; The name for the dataset in the HDF5 format</li>
<li><strong>data</strong> &#8211; The numpy array to be written to HDF5. The data write function
omsi_file_experiment.create_analysis used for writing of the data to file can
in principal also handel other primitive data types by explicitly converting them
to numpy. However, in this case the dtype is determined based on the numpy conversion
and correct behavior is not guaranteed. I.e., even single scalars should be stored as
a 1D numpy array here. Default value is None which is mapped to np.empty( shape=(0) , dtype=dtype)
in __init__</li>
<li><strong>dtype</strong> &#8211; <p>The data type to be used during writing. For standard numpy data types this is just
the dtype  of the dataset, i.e., [&#8216;data&#8217;].dtype. Other allowed datatypes are:</p>
<ul>
<li>For string:  omsi_format.str_type (omsi_format is located in omsi.dataformat.omsi_file )</li>
<li>To generate data links: ana_hdf5link   (analysis_data)</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="omsi.analysis.analysis_data.ana_hdf5link">
<code class="descname">ana_hdf5link</code><em class="property"> = -1</em><a class="headerlink" href="#omsi.analysis.analysis_data.ana_hdf5link" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.analysis_base">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">analysis_base</code><a class="headerlink" href="#omsi.analysis.analysis_base" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.datastructures.html#omsi.datastructures.analysis_data.parameter_manager" title="omsi.datastructures.analysis_data.parameter_manager"><code class="xref py py-class docutils literal"><span class="pre">omsi.datastructures.analysis_data.parameter_manager</span></code></a></p>
<p>Base class for omsi analysis functionality. The class provides a large set of functionality designed
to facilitate storage of analysis data in the omsi HDF5 file format. The class also provides a set
of functions to enable easy intergration of new analysis with the OpenMSI web-based viewer (see
Viewer functions below for details).</p>
<p><strong>Slicing:</strong></p>
<p>This class supports basic slicing to access data stored in the main member variables. By
default the data is retrieved from __data_list and the __getitem__(key) function. which implements
the [..] operator, returns __data_list[key][&#8216;data&#8217;]. The key is a string indicating the name of
the parameter to be retrieved. If the key is not found in the __data_list then the function will
try to retrieve the data from self.parameters list instead. By adding &#8220;parameter/key&#8221; or &#8220;dependency/key&#8221;
one may also explicitly retrieve values from the parameters.</p>
<p><strong>Instance Variables:</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="omsi.dataformat.omsi_file.html#omsi.dataformat.omsi_file.format.omsi_format_analysis.analysis_identifier" title="omsi.dataformat.omsi_file.format.omsi_format_analysis.analysis_identifier"><strong>analysis_identifier</strong></a> &#8211; Define the name for the analysis used as key in search operations</li>
<li><strong>__data_list</strong> &#8211; List of analysis_data to be written to the HDF5 file. Derived classes
need to add all data that should be saved for the analysis in the omsi HDF5 file to this dictionary.
See omsi.analysis.analysis_data for details.</li>
<li><strong>parameters</strong> &#8211; List of parameter_data objects of all  analysis parameters
(including those that may have dependencies).</li>
<li><strong>data_names</strong> &#8211; List of strings of all names of analysis output datasets. These are the
target keys for __data_list.</li>
<li><strong>profile_time_and_usage</strong> &#8211; Boolean indicating whether we should profile the execute_analysis(...) function
when called as part of the execute(...) function. The default value is false. Use the
enable_time_and_usage_profiling(..) function to determine which profiling should be performed. The time_and
_usage profile uses pythons cProfile (or Profile) to monitor how often and for how long particular parts
of the analysis code executed.</li>
<li><strong>profile_memory</strong> &#8211; Boolean indicating whether we should monitor memory usage (line-by-line) when
executing the execute_analysis(...) function. The default value is false. Use the
enable_time_and_usage_profiling(..) function to determine which profiling should be performed.</li>
<li><strong>omsi_analysis_storage</strong> &#8211; List of omsi_file_analysis object where the analysis is stored. The list may be empty.</li>
<li><strong>mpi_comm</strong> &#8211; In case we are running with MPI, this is the MPI communicator used for runnign the analysis.
Default is MPI.Comm_world/</li>
<li><strong>mpi_root</strong> &#8211; In case we are running with MPI, this is the root rank where data is collected to (e.g., runtime
data and analysis results)</li>
<li><strong>update_analysis</strong> &#8211; If the value is True, then we should execute the analysis before using the outputs.
If False, then the analysis has been executed with the current parameter settings.</li>
<li><a class="reference internal" href="omsi.workflow.driver.html#module-omsi.workflow.driver" title="omsi.workflow.driver"><strong>driver</strong></a> &#8211; Workflow driver to be used when executing multiple analyses, e.g., via execute_recursive or
execute_all. Default value is None in which case a new default driver will be used each time we
execute a workflow.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Execution Functions:</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">execute</span></code> : Then main function the user needs to call in order to execute the analysis</li>
<li><a href="#id2"><span class="problematic" id="id3">``</span></a>execute_analysis: This function needs to be implemented by child classes of <cite>analysis_base</cite>         to implement the specifics of executing the analysis.</li>
</ul>
<p><strong>I/O functions:</strong></p>
<p>These functions can be optionally overwritten to control how the analysis data should be written/read
from the omsi HDF5 file. Default implementations are provided here, which should be sufficient for most cases.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">add_custom_data_to_omsi_file</span></code>: The default implementation is empty as the default data write is  managed by     the <cite>omsi_file_experiment.create_analysis()</cite> function.  Overwrite this function, in case that the analysis needs     to write data to the HDF5 omsi file beyond what the defualt omsi data API does.</li>
<li><code class="docutils literal"><span class="pre">read_from_omsi_file</span></code>: The default implementation tries to reconstruct the original data as far as possible,     however, in particular in case that a custom add_custom_data_to_omsi_file function has been implemented, the     default implementation may not be sufficien. The default implementation reconstructs: i) analysis_identifier     and reads all custom data into ii)__data_list. Note, an error will be raised in case that the analysis type     specified in the HDF5 file does not match the analysis type specified by get_analysis_type(). This function     can be optionally overwritten to implement a custom data read.</li>
</ul>
<p><strong>Viewer functions:</strong></p>
<p>Several convenient functions are used to allow the OpenMSI online viewer to interact with the analysis     and to visualize it. The default implementations provided here simply indicate that the analysis does not     support the data access operations required by the online viewer. Overwrite these functions in the derived     analysis classes in order to interface them with the viewer. All viewer-related functions start with <code class="docutils literal"><span class="pre">v\_...</span></code> .</p>
<p>NOTE: the default implementation of the viewer functions defined in <code class="docutils literal"><span class="pre">analysis_base</span></code> are     designed to take care of the common requirement for providing viewer access to data from all dependencies     of an analysis. In many cases, the default implementation is often sill called at the end of custom     viewer functions.</p>
<p>NOTE: The viewer functions typically support a viewer_option parameter. viewer_option=0 is expected to      refer to the analysis itself.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">v_qslice</span></code>: Retrieve/compute data slices as requested via qslice URL requests. The corresponding view     of the DJANGO data access server already translates all input parameters and takes care of generating images/plots     if needed. This function is only responsible for retrieving the data.</li>
<li><code class="docutils literal"><span class="pre">v_qspectrum</span></code>: Retrieve/compute spectra as requested via qspectrum URL requests. The corresponding view of     the DJANGO data access server already translates all input parameters and takes care of generating images/plots     if needed. This function is only responsible for retrieving the data.</li>
<li><code class="docutils literal"><span class="pre">v_qmz</span></code>: Define the m/z axes for image slices and spectra as requested by qspectrum URL requests.</li>
<li><code class="docutils literal"><span class="pre">v_qspectrum_viewer_options</span></code>: Define a list of strings, describing the different viewer options available     for the analysis for qspectrum requests (i.e., <code class="docutils literal"><span class="pre">v_qspectrum</span></code>). This feature allows the analysis developer     to define multiple different visualization modes for the analysis. For example, when performing a data reduction     (e.g., PCA or NMF) one may want to show the raw spectra or the loadings vector of the projection in the spectrum     view (v_qspectrum). By providing different viewer options we allow the user to decide which option they are     most interested in.</li>
<li><code class="docutils literal"><span class="pre">v_qslice_viewer_options</span></code>: Define a list of strings, describing the different viewer options available for     the analysis for qslice requests (i.e., <code class="docutils literal"><span class="pre">v_qslice</span></code>). This feature allows the analysis developer to define     multiple different visualization modes for the analysis. For example, when performing a data reduction     (e.g., PCA or NMF) one may want to show the raw spectra or the loadings vector of the projection in the spectrum     view (v_qspectrum). By providing different viewer options we allow the user to decide which option they     are most interested in.</li>
</ul>
<p>Initialize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.analysis_base.add_custom_data_to_omsi_file">
<code class="descname">add_custom_data_to_omsi_file</code><span class="sig-paren">(</span><em>analysis_group</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.add_custom_data_to_omsi_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function can be optionally overwritten to implement a custom data write
function for the analysis to be used by the omsi_file API.</p>
<p>Note, this function should be used only to add additional data to the analysis
group. The data that is written by default is still written by
the <cite>omsi_file_experiment.create_analysis()</cite> function, i.e., the following data is
written by default: i) analysis_identifier ,ii) get_analysis_type, iii)__data_list,
iv) parameters, v) runinfo . Since the <cite>omsi_file.experiment.create_analysis()</cite>
functions takes care of setting up the basic structure of the analysis storage
(included the subgroubs for storing parameters and data dependencies) this setup can generally
be assumed to exist before this function is called. This function is called
automatically at the end omsi_file.experiment.create_analysis() (i.e, actually
<cite>omsi_file_analysis.__populate_analysis__(..)</cite> so that this function typically does not need to
be called explicitly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.add_parameter">
<code class="descname">add_parameter</code><span class="sig-paren">(</span><em>name</em>, <em>help</em>, <em>dtype=&lt;type 'unicode'&gt;</em>, <em>required=False</em>, <em>default=None</em>, <em>choices=None</em>, <em>data=None</em>, <em>group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.add_parameter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add a new parameter for the analysis. This function is typically used in the constructor
of a derived analysis to specify the parameters of the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; The name of the parameter</li>
<li><strong>help</strong> &#8211; Help string describing the parameter</li>
<li><strong>type</strong> &#8211; Optional type. Default is string.</li>
<li><strong>required</strong> &#8211; Boolean indicating whether the parameter is required (True) or optional (False). Default False.</li>
<li><strong>default</strong> &#8211; Optional default value for the parameter. Default None.</li>
<li><strong>choices</strong> &#8211; Optional list of choices with allowed data values. Default None, indicating no choices set.</li>
<li><strong>data</strong> &#8211; The data assigned to the parameter. None by default.</li>
<li><strong>group</strong> &#8211; Optional group string used to organize parameters. Default None, indicating that
parameters are automatically organized by driver class (e.g. in required and optional parameters)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">ValueError is raised if the parameter with the given name already exists.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.analysis_identifier_defined">
<code class="descname">analysis_identifier_defined</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.analysis_identifier_defined" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check whether the analysis identifier is defined by the user, i.e., set to value different than undefined
:return: bool</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.check_ready_to_execute">
<code class="descname">check_ready_to_execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.check_ready_to_execute" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check if all inputs are ready to determine if the analysis is ready to run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of omsi_analysis_parameter objects that are not ready. If the
returned list is empty, then the analysis is ready to run.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.clear_analysis">
<code class="descname">clear_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.clear_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear all analysis data&#8212;i.e., parameter, dependency data, output results, runtime data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.clear_analysis_data">
<code class="descname">clear_analysis_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.clear_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear the list of analysis data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.clear_and_restore">
<code class="descname">clear_and_restore</code><span class="sig-paren">(</span><em>analysis_manager=None</em>, <em>resave=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.clear_and_restore" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear all analysis data and restore the results from file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_manager</strong> &#8211; Instance of omsi_analysis_manager (e.g., an omsi_file_experiment) where the
analysis should be saved.</li>
<li><strong>resave</strong> &#8211; Boolean indicating whether the analysis should be saved again, even if it has been
saved before. This parameter only has effect if analysis_manager is given.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self, i.e., the updated analysis object with all data replaced with HDF5 references</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.clear_parameter_data">
<code class="descname">clear_parameter_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.clear_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear the list of parameter data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.clear_run_info_data">
<code class="descname">clear_run_info_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.clear_run_info_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear the runtime information data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.define_missing_parameters">
<code class="descname">define_missing_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.define_missing_parameters" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Called by the execute function before self.update_analysis_parameters
to set any required parameters that have not been defined to their respective default values.</p>
<p>This function may be overwritten in child classes to customize
the definition of default parameter values and to apply any
modifications (or checks) of parameters before the analysis is executed.
Any changes applied here will be recorded in the parameter of the analysis.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.enable_memory_profiling">
<code class="descname">enable_memory_profiling</code><span class="sig-paren">(</span><em>enable=True</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.enable_memory_profiling" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Enable or disable line-by-line profiling of memory usage of execute_analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>enable_memory</strong> (<em>bool</em>) &#8211; Enable (True) or disable (False) line-by-line profiling of memory usage</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ImportError is raised if a required package for profiling is not available.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.enable_time_and_usage_profiling">
<code class="descname">enable_time_and_usage_profiling</code><span class="sig-paren">(</span><em>enable=True</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.enable_time_and_usage_profiling" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Enable or disable profiling of time and usage of code parts of execute_analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>enable</strong> (<em>bool</em>) &#8211; Enable (True) or disable (False) profiling</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ImportError is raised if a required package for profiling is not available.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.execute" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Use this function to run the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Parameters to be used for the analysis. Parameters may also be set using
the __setitem__ mechanism or as batches using the set_parameter_values function.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">This function returns the output of the execute analysis function.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">AnalysisReadyError in case that the analysis is not ready to be executed. This may be
the case, e.g, when a dependent input parameter is not ready to be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.execute_all">
<em class="property">classmethod </em><code class="descname">execute_all</code><span class="sig-paren">(</span><em>force_update=False</em>, <em>executor=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.execute_all" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute all analysis instances that are currently defined.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>force_update</strong> &#8211; Boolean indicating whether we should force that all analyses are
executed again, even if they have already been run with the same settings before.
False by default.</li>
<li><strong>executor</strong> &#8211; Optional workflow executor to be used for the execution of all analyses.
The executor will be cleared and then all analyses will be added to executor. Default
value is None, in which case the function creates a default executor to be used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The workflow executor used</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement this function to implement the execution of the actual analysis.</p>
<p>This function may not require any input parameters. All input parameters are
recorded in the parameters and dependencies lists and should be retrieved
from there, e.g, using basic slicing self[ paramName ]</p>
<p>Input parameters may be added for internal use ONLY. E.g, we may add parameters that
are used internally to help with parallelization of the execute_analysis function.
Such parameters are not recorded and must be strictly optional so that analysis_base.execute(...)
can call the function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">This function may return any developer-defined data. Note, all
output that should be recorded must be put into the data list.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.execute_recursive">
<code class="descname">execute_recursive</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.execute_recursive" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Recursively execute this analysis and all its dependencies if necessary</p>
<p>We use a workflow driver to control the execution. To define the workflow driver we can set
the self.driver variable. If no workflow driver is given (i.e, self.driver==None), then the
default driver will be created. To change the default driver,
see <cite>omsi.workflow.base.workflow_executor_base.DEFAULT_EXECUTOR_CLASS</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Parameters to be used for the analysis. Parameters may also be set using
the __setitem__ mechanism or as batches using the set_parameter_values function.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Same as execute</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_all_analysis_data">
<code class="descname">get_all_analysis_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_all_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the complete list of all analysis datasets to be written to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_all_dependency_data">
<code class="descname">get_all_dependency_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_all_dependency_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the complete list of all direct dependencies to be written to the HDF5 file</p>
<p>NOTE: These are only the direct dependencies as specified by the analysis itself.
Use  get_all_dependency_data_recursive(..) to also get the indirect dependencies of
the analysis due to dependencies of the dependencies themselves.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of parameter_data objects that define dependencies.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_all_parameter_data">
<code class="descname">get_all_parameter_data</code><span class="sig-paren">(</span><em>exclude_dependencies=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_all_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the complete list of all parameter datasets to be written to the HDF5 file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exclude_dependencies</strong> &#8211; Boolean indicating whether we should exclude parameters
that define dependencies from the list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_all_run_info">
<code class="descname">get_all_run_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_all_run_info" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the dict with the complete info about the last run of the analysis</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_analysis_data">
<code class="descname">get_analysis_data</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the index return the associated dataset to be written to the HDF5 file</p>
<p>:param index : Retrun the index entry of the private member __data_list.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_analysis_data_by_name">
<code class="descname">get_analysis_data_by_name</code><span class="sig-paren">(</span><em>dataname</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_analysis_data_by_name" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the key name of the data return the associated analysis_data object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dataname</strong> &#8211; Name of the analysis data requested from the private __data_list member.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The analysis_data object or None if not found.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_analysis_data_names">
<code class="descname">get_analysis_data_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_analysis_data_names" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of all analysis dataset names.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_analysis_identifier">
<code class="descname">get_analysis_identifier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_analysis_identifier" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the name of the analysis used as key when searching for a particular analysis</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.get_analysis_instances">
<em class="property">classmethod </em><code class="descname">get_analysis_instances</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_analysis_instances" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generator function used to iterate through all instances of analysis_base.
The function creates references for all weak references stored in cls._analysis_instances
and returns the references if it exists and cleans up the any invalid references after the
iteration is complete.
:return: References to analysis_base objects</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_analysis_type">
<code class="descname">get_analysis_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_analysis_type" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return a string indicating the type of analysis performed</p>
</dd></dl>

<dl class="staticmethod">
<dt id="omsi.analysis.analysis_base.get_default_dtypes">
<em class="property">static </em><code class="descname">get_default_dtypes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_default_dtypes" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of available default dtypes used for analyses.
Same as <cite>data_dtypes.get_dtypes()</cite>.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="omsi.analysis.analysis_base.get_default_parameter_groups">
<em class="property">static </em><code class="descname">get_default_parameter_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_default_parameter_groups" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of commonly used parameter groups and associated descriptions.</p>
<p>Use of default groups provides consistency and allows other system to
design custom behavior around the semantic of parameter groups</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dictionary where the keys are the short names of the groups and the
values are dicts with following keys:value pairs: &#8216;name&#8217; , &#8216;description&#8217;.
Use the &#8216;name&#8217; to define the group to be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_help_string">
<code class="descname">get_help_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_help_string" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a string describing the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Help string describing the analysis and its parameters</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_memory_profile_info">
<code class="descname">get_memory_profile_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_memory_profile_info" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Based on the memory profile of the execute_analysis(..) function get
the string describing the line-by-line memory usage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String describing the memory usage profile. None is returned in case that
no memory profiling data is available.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_num_analysis_data">
<code class="descname">get_num_analysis_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_num_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Retrun the number of analysis datasets to be wirtten to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_num_dependency_data">
<code class="descname">get_num_dependency_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_num_dependency_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the number of dependencies to be wirtten to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_num_parameter_data">
<code class="descname">get_num_parameter_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_num_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the number of parameter datasets to be wirtten to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_omsi_analysis_storage">
<code class="descname">get_omsi_analysis_storage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_omsi_analysis_storage" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of known locations where this analysis has been saved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of <cite>omsi.dataformat.omsi_file.analysis. omsi_file_analysis</cite> objects where the analysis is saved.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_parameter_data">
<code class="descname">get_parameter_data</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the index return the associated dataset to be written to the HDF5 file</p>
<p>:param index : Return the index entry of the private member parameters.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_parameter_data_by_name">
<code class="descname">get_parameter_data_by_name</code><span class="sig-paren">(</span><em>dataname</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_parameter_data_by_name" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the key name of the data return the associated parameter_data object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dataname</strong> &#8211; Name of the parameter requested from the parameters member.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The parameter_data object or None if not found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_parameter_names">
<code class="descname">get_parameter_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_parameter_names" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of all parameter dataset names (including those that may define
dependencies.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.get_profile_stats_object">
<code class="descname">get_profile_stats_object</code><span class="sig-paren">(</span><em>consolidate=True</em>, <em>stream=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.get_profile_stats_object" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Based on the execution profile of the execute_analysis(..) function get
<code class="docutils literal"><span class="pre">pstats.Stats</span></code> object to help with the interpretation of the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>consolidate</strong> &#8211; Boolean flag indicating whether multiple stats (e.g., from multiple cores)
should be consolidated into a single stats object. Default is True.</li>
<li><strong>stream</strong> &#8211; The optional stream parameter to be used fo the pstats.Stats object.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A single pstats.Stats object if consolidate is True. Otherwise the function
returns a list of pstats.Stats objects, one per recorded statistic. None is returned
in case that the stats objects cannot be created or no profiling data is available.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.has_omsi_analysis_storage">
<code class="descname">has_omsi_analysis_storage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.has_omsi_analysis_storage" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check whether a storage location is known where the anlaysis has been saved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Boolean indicating whether self.omsi_analysis_storage is not empty</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.keys" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of all valid keys, i.e., a combination of all input parameter and output names.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of strings with all input parameter and output names.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.locate_analysis">
<em class="property">classmethod </em><code class="descname">locate_analysis</code><span class="sig-paren">(</span><em>data_object</em>, <em>include_parameters=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.locate_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given a data_object try to locate the analysis that creates the object as an
output of its execution (and optionally analyses that have the object as an input).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_object</strong> &#8211; The data object of interest.</li>
<li><strong>include_parameters</strong> &#8211; Boolean indicating whether also input parameters should be considered
in the search in addition to the outputs of an analysis</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dependency_dict pointing to the relevant object or None in case the
object was not found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.read_from_omsi_file">
<code class="descname">read_from_omsi_file</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>load_data=True</em>, <em>load_parameters=True</em>, <em>load_runtime_data=True</em>, <em>dependencies_omsi_format=True</em>, <em>ignore_type_conflict=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.read_from_omsi_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function can be optionally overwritten to implement a custom data read.</p>
<p>The default implementation tries to reconstruct the original data as far
as possible, however, in particular in case that a custom add_custom_data_to_omsi_file
function has been implemented, the default implementation may not be sufficient.
The default implementation reconstructs: i) analysis_identifier and reads all
custom data into iii)__data_list. Note, an error will be raised in case that
the analysis type specified in the HDF5 file does not match the analysis type
specified by get_analysis_type()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object associated with the hdf5 data group with             the analysis data_list</li>
<li><strong>load_data</strong> &#8211; Should the analysis data be loaded from file (default) or just stored as h5py data objects</li>
<li><strong>load_parameters</strong> &#8211; Should parameters be loaded from file (default) or just stored as h5py data objects.</li>
<li><strong>load_runtime_data</strong> &#8211; Should runtime data be loaded from file (default) or just stored as h5py data objects</li>
<li><strong>dependencies_omsi_format</strong> &#8211; Should dependencies be loaded as omsi_file API objects (default)
or just as h5py objects.</li>
<li><strong>ignore_type_conflict</strong> &#8211; Set to True to allow the analysis to be loaded into the
current analysis object even if the type indicated in the file does not match the
class. Default value is False. This behavior can be useful when different analysis
have compatible data structures or when we want to load the data in to a generic
analysis container, e.g, analysis_generic.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns bool:</th><td class="field-body"><p class="first">Boolean indicating whether the data was read successfully</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body"><p class="first last">TypeError : A type error will be raised in case that the analysis type specified         by the file does not match the analysis type provided by self.get_analysis_type()</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.record_execute_analysis_outputs">
<code class="descname">record_execute_analysis_outputs</code><span class="sig-paren">(</span><em>analysis_output</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.record_execute_analysis_outputs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Function used internally by execute to record the output
of the custom execute_analysis(...) function to the __data_list.</p>
<p>This function may be overwritten in child classes in order to
customize the behavior for recording data outputs. Eg., for some
analyses one may only want to record a particular set of outputs,
rather than all outputs generated by the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_output</strong> &#8211; The output of the execute_analysis(...) function to be recorded</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.results_ready">
<code class="descname">results_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.results_ready" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check whether the results of the analysis are ready to be used
:return: Boolean</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.set_analysis_identifier">
<code class="descname">set_analysis_identifier</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.set_analysis_identifier" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set the name of the analysis to identifer</p>
<p>Side Effects: This function modifies self.analysis_identifier</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>identifier</strong> (<em>str</em>) &#8211; The new analysis identifier string to be used (should be unique)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.set_parameter_values">
<code class="descname">set_parameter_values</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.set_parameter_values" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set all parameters given as input to the function. The inputs
are placed in the self.parameters list. If the parameter refers
to an existing h5py.Dataset, h5py.Group,  managed h5py object,
or is an instance of an existing omis_analysi_base object, then
a dependency_dict will be created and stored as value instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Dictionary of keyword arguments. All keys are
expected to be strings. All values are expected to be
either i) numpy arrays, ii) int, float, str or unicode
variables, iii) h5py.Dataset or  h5py.Group, iv) or any
the omsi_file API class objects. For iii) and iv) one
may provide a tuple consisting of the dataobject t[0] and
an additional selection string t[1].</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.update_analysis_parameters">
<code class="descname">update_analysis_parameters</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.update_analysis_parameters" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Record the analysis parameters passed to the execute() function.</p>
<p>The default implementation simply calls the set_parameter_values(...) function.
This function may be overwritten to customize the behavior of how parameters
are recorded by the execute function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Dictionary of keyword arguments with the parameters passed to the execute(..) function</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mzSpectra : Array with the static mz values for the spectra.</li>
<li>labelSpectra : Label for the spectral mz axis</li>
<li>mzSlice : Array of the static mz values for the slices or None if identical to the mzSpectra.</li>
<li>labelSlice : Label for the slice mz axis or None if identical to labelSpectra.</li>
<li>values_x: The values for the x axis of the image (or None)</li>
<li>label_x: Label for the x axis of the image</li>
<li>values_y: The values for the y axis of the image (or None)</li>
<li>label_y: Label for the y axis of the image</li>
<li>values_z: The values for the z axis of the image (or None)</li>
<li>label_z: Label for the z axis of the image</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy array with the data to be displayed in the image slice viewer. Slicing will be
performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">NotImplementedError in case that v_qslice is not supported by the analysis.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the dependencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For most cases
this is not needed here as the support for slice operations is usually a static decission based on
the class type, however, in some cases additional checks may be needed (e.g., ensure that the required
data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<p><strong>Developer Note:</strong> h5py currently supports only a single index list. If the user provides an index-list
for both x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
multiple lists in the selection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elements are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be                 the last axis. For index selection x=1,y=1 a 1D array is usually expected. For indexList                 selections x=[0]&amp;y=[1] usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we                 one usually expects a 3D array.</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum.                 Otherwise, return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z                 values are needed for interpretation of the returned spectrum).This may be needed, e.g., in                 cases where a per-spectrum peak analysis is performed and the peaks for each spectrum appear                 at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_base.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the dependencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.
For most cases this is not needed here as the support for slice operations is usually a static decision
based on the class type, however, in some cases additional checks may be needed (e.g., ensure that the
required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty if
the analysis does not support qspectrum requests (i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_base.write_analysis_data">
<code class="descname">write_analysis_data</code><span class="sig-paren">(</span><em>analysis_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_base.write_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function is used to write the actual analysis data to file. If not implemented, then the
omsi_file_analysis API&#8217;s default behavior is used instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored. May be None on cores that
do not perform any writing but which need to participate in communication, e.g., to collect data
for writing.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="omsi.analysis.AnalysisReadyError">
<em class="property">exception </em><code class="descclassname">omsi.analysis.</code><code class="descname">AnalysisReadyError</code><span class="sig-paren">(</span><em>value</em>, <em>params=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.AnalysisReadyError" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Custom exception used to indicate that an analysis is not ready to execute.</p>
<p>Initialize the AnalysisReadyError</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> &#8211; Error message string</li>
<li><strong>params</strong> &#8211; Optional list of dependent parameters that are not ready to be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="omsi.analysis.analysis_generic">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">analysis_generic</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>This analysis class is used if the specific anlaysis type is unknown, e.g., when loading
custom user-defined analysis data that may have not be available in the standard
omsi package used.</p>
<p>Initialize the basic data members</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name_key</strong> &#8211; The name for the analysis</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="omsi.analysis.analysis_generic.DEFAULT_OUTPUT_PREFIX">
<code class="descname">DEFAULT_OUTPUT_PREFIX</code><em class="property"> = 'output_'</em><a class="headerlink" href="#omsi.analysis.analysis_generic.DEFAULT_OUTPUT_PREFIX" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_generic.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.execute" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Overwrite the default implementation of execute to update parameter specifications/types
when wrapping functions where the types are not known a priori.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Custom analysis parameters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The result of execute_analysis()</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_generic.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Nothing to do here.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.from_function">
<em class="property">classmethod </em><code class="descname">from_function</code><span class="sig-paren">(</span><em>analysis_function</em>, <em>output_names=None</em>, <em>parameter_specs=None</em>, <em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.from_function" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create a generic analysis class for a given analysis function.</p>
<p>This functionality is useful to ease quick scripting on analyses but should not be used in production.</p>
<p>NOTE: __analysis_function is a reserved parameter name used to store the analysis function and may
not be used as an input parameter for the analysis function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_function</strong> &#8211; The analysis function to be wrapped for provenance tracking and storage</li>
<li><strong>output_names</strong> &#8211; Optionally, define a list of the names of the outputs</li>
<li><strong>parameter_specs</strong> &#8211; Optional list of omsi.datastructures.analysis_data.parameter_data with
additional information about the parameters of the function.</li>
<li><strong>name_key</strong> &#8211; The name for the analysis, i.e., the analysis  identifier</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new generic analysis class</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.get_analysis_type">
<em class="property">classmethod </em><code class="descname">get_analysis_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.get_analysis_type" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return a string indicating the type of analysis performed</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_generic.get_real_analysis_type">
<code class="descname">get_real_analysis_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.get_real_analysis_type" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This class is designed to handle generic (including unkown) types of analysis.
In cases, e.g., were this class is used to store analysis data from an HDF5
file we may have an actual analysis type available even if we do not have
a special analysis class may not be available in the current installation</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_generic.read_from_omsi_file">
<code class="descname">read_from_omsi_file</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>load_data=True</em>, <em>load_parameters=True</em>, <em>load_runtime_data=True</em>, <em>dependencies_omsi_format=True</em>, <em>ignore_type_conflict=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.read_from_omsi_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>See <cite>omsi.analysis.analysis_base.read_from_omsi_file(...)</cite> for details.
The function is overwritten here mainly to initialize the self.real_analysis_type
instance variable but otherwise uses the default behavior.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qmz URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qslice URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qspectrum URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_generic.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.analysis_generic.write_analysis_data">
<code class="descname">write_analysis_data</code><span class="sig-paren">(</span><em>analysis_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_generic.write_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function is used to write the actual analysis data to file. If not implemented, then the
omsi_file_analysis API&#8217;s default behavior is used instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored. May be None on cores that
do not perform any writing but which need to participate in communication, e.g., to collect data
for writing.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.omsi_findpeaks_global">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">omsi_findpeaks_global</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Basic global peak detection analysis. The default implementation
computes the peaks on the average spectrum and then computes the peak-cube data,
i.e., the values for the detected peaks at each pixel.</p>
<p>TODO: The current version assumes 2D data</p>
<p>Initialize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.omsi_findpeaks_global.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute the global peak finding for the given msidata and mzdata.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_global.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qmz URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_global.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qslice URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_global.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_global.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qspectrum URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_global.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_global.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.omsi_findpeaks_local">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">omsi_findpeaks_local</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class defining a basic gloabl peak finding. The default implementation computes the peaks on the average
spectrum and then computes the peak-cube data, i.e., the values for the detected peaks at each pixel.</p>
<p>TODO: The current version assumes 2D data</p>
<p>Initialize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.omsi_findpeaks_local.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><em>msidata_subblock=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute the local peak finder for the given msidata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msidata_subblock</strong> &#8211; Optional input parameter used for parallel execution of the
analysis only. If msidata_subblock is set, then the given subblock will be processed
in SERIAL instead of processing self[&#8216;msidata&#8217;] in PARALLEL (if available). This
parameter is strictly optional and intended for internal use only.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_local.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qmz URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_local.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qslice URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_local.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_local.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qspectrum URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_findpeaks_local.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.omsi_findpeaks_local.write_analysis_data">
<code class="descname">write_analysis_data</code><span class="sig-paren">(</span><em>analysis_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_findpeaks_local.write_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function is used to write the actual analysis data to file. If not implemented, then the
omsi_file_analysis API&#8217;s default behavior is used instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.omsi_nmf">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">omsi_nmf</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class defining a basic nmf analysis.</p>
<p>The function has primarily been tested we MSI datasets but should support
arbitrary n-D arrays (n&gt;=2). The last dimension of the input array must be the
spectrum dimnensions.</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.omsi_nmf.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute the nmf for the given msidata</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_nmf.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qmz URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_nmf.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qslice URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_nmf.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_nmf.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qspectrum URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_nmf.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_nmf.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.omsi_cx">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">omsi_cx</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class used to implement CX factorization on MSI data.</p>
<p>Initalize the basic data members</p>
<dl class="classmethod">
<dt id="omsi.analysis.omsi_cx.comp_lev_exact">
<em class="property">classmethod </em><code class="descname">comp_lev_exact</code><span class="sig-paren">(</span><em>A</em>, <em>k</em>, <em>axis</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.comp_lev_exact" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function computes the column or row leverage scores of the input matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>A</strong> &#8211; n-by-d matrix</li>
<li><strong>k</strong> &#8211; rank parameter, k &lt;= min(n,d)</li>
<li><strong>axis</strong> &#8211; 0: compute row leverage scores; 1: compute column leverage scores.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">1D array of leverage scores. If axis = 0, the length of lev is n.  otherwise, the length of lev is d.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="omsi.analysis.omsi_cx.dimension_index">
<code class="descname">dimension_index</code><em class="property"> = {'pixelDim': 1, 'imageDim': 0}</em><a class="headerlink" href="#omsi.analysis.omsi_cx.dimension_index" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="omsi.analysis.omsi_cx.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>EDIT_ME:</p>
<p>Replace this text with the appropriate documentation for the analysis.
Describe what your analysis does and how a user can use it. Note, a user will
call the function execute(...) which takes care of storing parameters, collecting
execution data etc., so that you only need to implement your analysis, the rest
is taken care of by analysis_base. omsi uses Sphynx syntax for the
documentation.</p>
<p>Keyword Arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mydata</strong> &#8211; <p>...</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_cx.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_cx.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer. Slicing will
be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_cx.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For
most cases this is not needed here as the support for slice operations is usually a static decision
based on the class type, however, in some cases additional checks may be needed (e.g., ensure that
the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_cx.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<dl class="docutils">
<dt>Developer Note: h5py currently supports only a single index list. If the user provides an index-list for both</dt>
<dd>x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
mulitple lists in the selection.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elemnts are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be the last                 axis. For index selection x=1,y=1 a 1D array is usually expected. For indexList selections x=[0]&amp;y=[1]                 usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we one usually expects a 3D array.</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum. Otherwise,                 return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z values are needed                 for interpretation of the returned spectrum).This may be needed, e.g., in cases where a per-spectrum                 peak analysis is performed and the peaks for each spectrum appear at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_cx.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_cx.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For most cases
this is not needed here as the support for slice operations is usually a static decission based on the
class type, however, in some cases additional checks may be needed (e.g., ensure that the
required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qspectrum requests (i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.omsi_kmeans">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">omsi_kmeans</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_kmeans" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>Class defining a basic nmf analysis for a 2D MSI data file or slice of the data</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.omsi_kmeans.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_kmeans.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute the kmeans clustering for the given msidata</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="omsi.analysis.omsi_tic_norm">
<em class="property">class </em><code class="descclassname">omsi.analysis.</code><code class="descname">omsi_tic_norm</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>TIC Normalization analysis.</p>
<p>Initalize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.omsi_tic_norm.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Normalize the data based on the total intensity of a spectrum or the
intensities of a select set of ions.</p>
<p>Calculations are performed using a memory map approach to avoid loading
all data into memory. TIC normalization can as such be performed even
on large files (assuming sufficient disk space).</p>
<p>Keyword Arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>msidata</strong> (<em>h5py.dataset or numpu array (3D)</em>) &#8211; The input MSI dataset</li>
<li><strong>mzdata</strong> &#8211; The mz axsis do the dataset</li>
<li><strong>maxCount</strong> &#8211; <p>...</p>
</li>
<li><strong>mzTol</strong> &#8211; <p>...</p>
</li>
<li><strong>infIons</strong> &#8211; List of informative ions</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.omsi_tic_norm.record_execute_analysis_outputs">
<code class="descname">record_execute_analysis_outputs</code><span class="sig-paren">(</span><em>analysis_output</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.record_execute_analysis_outputs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>We are not returning any outputs here, but we are going to record them manually.
:param analysis_output: The output of the execute_analysis(...) function.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_tic_norm.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_tic_norm.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer. Slicing will
be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_tic_norm.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For
most cases this is not needed here as the support for slice operations is usually a static
decision based on the class type, however, in some cases additional checks may be needed (e.g.,
ensure that the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty if
the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_tic_norm.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<dl class="docutils">
<dt>Developer Note: h5py currently supports only a single index list. If the user provides an index-list for both</dt>
<dd>x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
multiple lists in the selection.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis then
this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elements are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be the last                   axis. For index selection x=1,y=1 a 1D array is usually expected. For indexList selections                   x=[0]&amp;y=[1] usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we one usually                  expects a 3D array/</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum.                  Otherwise, return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z                  values are needed for interpretation of the returned spectrum).This may be needed, e.g., in                  cases where a per-spectrum peak analysis is performed and the peaks for each spectrum appear                  at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.omsi_tic_norm.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.omsi_tic_norm.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the depencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param analysis_object:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">The omsi_file_analysis object for which slicing should be performed.  For most cases
this is not needed here as the support for slice operations is usually a static decission based
on the class type, however, in some cases additional checks may be needed (e.g., ensure that
the required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qspectrum requests (i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-omsi.analysis.base">
<span id="base-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">base</span></code> Module<a class="headerlink" href="#module-omsi.analysis.base" title="Permalink to this headline">Â¶</a></h2>
<p>Module specifying the base analysis API for integrating new analysis with the toolkit and the
OpenMSI science gateway.</p>
<dl class="exception">
<dt id="omsi.analysis.base.AnalysisReadyError">
<em class="property">exception </em><code class="descclassname">omsi.analysis.base.</code><code class="descname">AnalysisReadyError</code><span class="sig-paren">(</span><em>value</em>, <em>params=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.AnalysisReadyError" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Custom exception used to indicate that an analysis is not ready to execute.</p>
<p>Initialize the AnalysisReadyError</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> &#8211; Error message string</li>
<li><strong>params</strong> &#8211; Optional list of dependent parameters that are not ready to be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="omsi.analysis.base.analysis_base">
<em class="property">class </em><code class="descclassname">omsi.analysis.base.</code><code class="descname">analysis_base</code><a class="headerlink" href="#omsi.analysis.base.analysis_base" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="omsi.datastructures.html#omsi.datastructures.analysis_data.parameter_manager" title="omsi.datastructures.analysis_data.parameter_manager"><code class="xref py py-class docutils literal"><span class="pre">omsi.datastructures.analysis_data.parameter_manager</span></code></a></p>
<p>Base class for omsi analysis functionality. The class provides a large set of functionality designed
to facilitate storage of analysis data in the omsi HDF5 file format. The class also provides a set
of functions to enable easy intergration of new analysis with the OpenMSI web-based viewer (see
Viewer functions below for details).</p>
<p><strong>Slicing:</strong></p>
<p>This class supports basic slicing to access data stored in the main member variables. By
default the data is retrieved from __data_list and the __getitem__(key) function. which implements
the [..] operator, returns __data_list[key][&#8216;data&#8217;]. The key is a string indicating the name of
the parameter to be retrieved. If the key is not found in the __data_list then the function will
try to retrieve the data from self.parameters list instead. By adding &#8220;parameter/key&#8221; or &#8220;dependency/key&#8221;
one may also explicitly retrieve values from the parameters.</p>
<p><strong>Instance Variables:</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="omsi.dataformat.omsi_file.html#omsi.dataformat.omsi_file.format.omsi_format_analysis.analysis_identifier" title="omsi.dataformat.omsi_file.format.omsi_format_analysis.analysis_identifier"><strong>analysis_identifier</strong></a> &#8211; Define the name for the analysis used as key in search operations</li>
<li><strong>__data_list</strong> &#8211; List of analysis_data to be written to the HDF5 file. Derived classes
need to add all data that should be saved for the analysis in the omsi HDF5 file to this dictionary.
See omsi.analysis.analysis_data for details.</li>
<li><strong>parameters</strong> &#8211; List of parameter_data objects of all  analysis parameters
(including those that may have dependencies).</li>
<li><strong>data_names</strong> &#8211; List of strings of all names of analysis output datasets. These are the
target keys for __data_list.</li>
<li><strong>profile_time_and_usage</strong> &#8211; Boolean indicating whether we should profile the execute_analysis(...) function
when called as part of the execute(...) function. The default value is false. Use the
enable_time_and_usage_profiling(..) function to determine which profiling should be performed. The time_and
_usage profile uses pythons cProfile (or Profile) to monitor how often and for how long particular parts
of the analysis code executed.</li>
<li><strong>profile_memory</strong> &#8211; Boolean indicating whether we should monitor memory usage (line-by-line) when
executing the execute_analysis(...) function. The default value is false. Use the
enable_time_and_usage_profiling(..) function to determine which profiling should be performed.</li>
<li><strong>omsi_analysis_storage</strong> &#8211; List of omsi_file_analysis object where the analysis is stored. The list may be empty.</li>
<li><strong>mpi_comm</strong> &#8211; In case we are running with MPI, this is the MPI communicator used for runnign the analysis.
Default is MPI.Comm_world/</li>
<li><strong>mpi_root</strong> &#8211; In case we are running with MPI, this is the root rank where data is collected to (e.g., runtime
data and analysis results)</li>
<li><strong>update_analysis</strong> &#8211; If the value is True, then we should execute the analysis before using the outputs.
If False, then the analysis has been executed with the current parameter settings.</li>
<li><a class="reference internal" href="omsi.workflow.driver.html#module-omsi.workflow.driver" title="omsi.workflow.driver"><strong>driver</strong></a> &#8211; Workflow driver to be used when executing multiple analyses, e.g., via execute_recursive or
execute_all. Default value is None in which case a new default driver will be used each time we
execute a workflow.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Execution Functions:</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">execute</span></code> : Then main function the user needs to call in order to execute the analysis</li>
<li><a href="#id4"><span class="problematic" id="id5">``</span></a>execute_analysis: This function needs to be implemented by child classes of <cite>analysis_base</cite>         to implement the specifics of executing the analysis.</li>
</ul>
<p><strong>I/O functions:</strong></p>
<p>These functions can be optionally overwritten to control how the analysis data should be written/read
from the omsi HDF5 file. Default implementations are provided here, which should be sufficient for most cases.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">add_custom_data_to_omsi_file</span></code>: The default implementation is empty as the default data write is  managed by     the <cite>omsi_file_experiment.create_analysis()</cite> function.  Overwrite this function, in case that the analysis needs     to write data to the HDF5 omsi file beyond what the defualt omsi data API does.</li>
<li><code class="docutils literal"><span class="pre">read_from_omsi_file</span></code>: The default implementation tries to reconstruct the original data as far as possible,     however, in particular in case that a custom add_custom_data_to_omsi_file function has been implemented, the     default implementation may not be sufficien. The default implementation reconstructs: i) analysis_identifier     and reads all custom data into ii)__data_list. Note, an error will be raised in case that the analysis type     specified in the HDF5 file does not match the analysis type specified by get_analysis_type(). This function     can be optionally overwritten to implement a custom data read.</li>
</ul>
<p><strong>Viewer functions:</strong></p>
<p>Several convenient functions are used to allow the OpenMSI online viewer to interact with the analysis     and to visualize it. The default implementations provided here simply indicate that the analysis does not     support the data access operations required by the online viewer. Overwrite these functions in the derived     analysis classes in order to interface them with the viewer. All viewer-related functions start with <code class="docutils literal"><span class="pre">v\_...</span></code> .</p>
<p>NOTE: the default implementation of the viewer functions defined in <code class="docutils literal"><span class="pre">analysis_base</span></code> are     designed to take care of the common requirement for providing viewer access to data from all dependencies     of an analysis. In many cases, the default implementation is often sill called at the end of custom     viewer functions.</p>
<p>NOTE: The viewer functions typically support a viewer_option parameter. viewer_option=0 is expected to      refer to the analysis itself.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">v_qslice</span></code>: Retrieve/compute data slices as requested via qslice URL requests. The corresponding view     of the DJANGO data access server already translates all input parameters and takes care of generating images/plots     if needed. This function is only responsible for retrieving the data.</li>
<li><code class="docutils literal"><span class="pre">v_qspectrum</span></code>: Retrieve/compute spectra as requested via qspectrum URL requests. The corresponding view of     the DJANGO data access server already translates all input parameters and takes care of generating images/plots     if needed. This function is only responsible for retrieving the data.</li>
<li><code class="docutils literal"><span class="pre">v_qmz</span></code>: Define the m/z axes for image slices and spectra as requested by qspectrum URL requests.</li>
<li><code class="docutils literal"><span class="pre">v_qspectrum_viewer_options</span></code>: Define a list of strings, describing the different viewer options available     for the analysis for qspectrum requests (i.e., <code class="docutils literal"><span class="pre">v_qspectrum</span></code>). This feature allows the analysis developer     to define multiple different visualization modes for the analysis. For example, when performing a data reduction     (e.g., PCA or NMF) one may want to show the raw spectra or the loadings vector of the projection in the spectrum     view (v_qspectrum). By providing different viewer options we allow the user to decide which option they are     most interested in.</li>
<li><code class="docutils literal"><span class="pre">v_qslice_viewer_options</span></code>: Define a list of strings, describing the different viewer options available for     the analysis for qslice requests (i.e., <code class="docutils literal"><span class="pre">v_qslice</span></code>). This feature allows the analysis developer to define     multiple different visualization modes for the analysis. For example, when performing a data reduction     (e.g., PCA or NMF) one may want to show the raw spectra or the loadings vector of the projection in the spectrum     view (v_qspectrum). By providing different viewer options we allow the user to decide which option they     are most interested in.</li>
</ul>
<p>Initialize the basic data members</p>
<dl class="method">
<dt id="omsi.analysis.base.analysis_base.add_custom_data_to_omsi_file">
<code class="descname">add_custom_data_to_omsi_file</code><span class="sig-paren">(</span><em>analysis_group</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.add_custom_data_to_omsi_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function can be optionally overwritten to implement a custom data write
function for the analysis to be used by the omsi_file API.</p>
<p>Note, this function should be used only to add additional data to the analysis
group. The data that is written by default is still written by
the <cite>omsi_file_experiment.create_analysis()</cite> function, i.e., the following data is
written by default: i) analysis_identifier ,ii) get_analysis_type, iii)__data_list,
iv) parameters, v) runinfo . Since the <cite>omsi_file.experiment.create_analysis()</cite>
functions takes care of setting up the basic structure of the analysis storage
(included the subgroubs for storing parameters and data dependencies) this setup can generally
be assumed to exist before this function is called. This function is called
automatically at the end omsi_file.experiment.create_analysis() (i.e, actually
<cite>omsi_file_analysis.__populate_analysis__(..)</cite> so that this function typically does not need to
be called explicitly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.add_parameter">
<code class="descname">add_parameter</code><span class="sig-paren">(</span><em>name</em>, <em>help</em>, <em>dtype=&lt;type 'unicode'&gt;</em>, <em>required=False</em>, <em>default=None</em>, <em>choices=None</em>, <em>data=None</em>, <em>group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.add_parameter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add a new parameter for the analysis. This function is typically used in the constructor
of a derived analysis to specify the parameters of the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> &#8211; The name of the parameter</li>
<li><strong>help</strong> &#8211; Help string describing the parameter</li>
<li><strong>type</strong> &#8211; Optional type. Default is string.</li>
<li><strong>required</strong> &#8211; Boolean indicating whether the parameter is required (True) or optional (False). Default False.</li>
<li><strong>default</strong> &#8211; Optional default value for the parameter. Default None.</li>
<li><strong>choices</strong> &#8211; Optional list of choices with allowed data values. Default None, indicating no choices set.</li>
<li><strong>data</strong> &#8211; The data assigned to the parameter. None by default.</li>
<li><strong>group</strong> &#8211; Optional group string used to organize parameters. Default None, indicating that
parameters are automatically organized by driver class (e.g. in required and optional parameters)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">ValueError is raised if the parameter with the given name already exists.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.analysis_identifier_defined">
<code class="descname">analysis_identifier_defined</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.analysis_identifier_defined" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check whether the analysis identifier is defined by the user, i.e., set to value different than undefined
:return: bool</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.check_ready_to_execute">
<code class="descname">check_ready_to_execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.check_ready_to_execute" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check if all inputs are ready to determine if the analysis is ready to run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of omsi_analysis_parameter objects that are not ready. If the
returned list is empty, then the analysis is ready to run.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.clear_analysis">
<code class="descname">clear_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.clear_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear all analysis data&#8212;i.e., parameter, dependency data, output results, runtime data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.clear_analysis_data">
<code class="descname">clear_analysis_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.clear_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear the list of analysis data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.clear_and_restore">
<code class="descname">clear_and_restore</code><span class="sig-paren">(</span><em>analysis_manager=None</em>, <em>resave=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.clear_and_restore" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear all analysis data and restore the results from file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_manager</strong> &#8211; Instance of omsi_analysis_manager (e.g., an omsi_file_experiment) where the
analysis should be saved.</li>
<li><strong>resave</strong> &#8211; Boolean indicating whether the analysis should be saved again, even if it has been
saved before. This parameter only has effect if analysis_manager is given.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self, i.e., the updated analysis object with all data replaced with HDF5 references</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.clear_parameter_data">
<code class="descname">clear_parameter_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.clear_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear the list of parameter data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.clear_run_info_data">
<code class="descname">clear_run_info_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.clear_run_info_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear the runtime information data</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.define_missing_parameters">
<code class="descname">define_missing_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.define_missing_parameters" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Called by the execute function before self.update_analysis_parameters
to set any required parameters that have not been defined to their respective default values.</p>
<p>This function may be overwritten in child classes to customize
the definition of default parameter values and to apply any
modifications (or checks) of parameters before the analysis is executed.
Any changes applied here will be recorded in the parameter of the analysis.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.enable_memory_profiling">
<code class="descname">enable_memory_profiling</code><span class="sig-paren">(</span><em>enable=True</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.enable_memory_profiling" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Enable or disable line-by-line profiling of memory usage of execute_analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>enable_memory</strong> (<em>bool</em>) &#8211; Enable (True) or disable (False) line-by-line profiling of memory usage</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ImportError is raised if a required package for profiling is not available.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.enable_time_and_usage_profiling">
<code class="descname">enable_time_and_usage_profiling</code><span class="sig-paren">(</span><em>enable=True</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.enable_time_and_usage_profiling" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Enable or disable profiling of time and usage of code parts of execute_analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>enable</strong> (<em>bool</em>) &#8211; Enable (True) or disable (False) profiling</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ImportError is raised if a required package for profiling is not available.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.execute" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Use this function to run the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Parameters to be used for the analysis. Parameters may also be set using
the __setitem__ mechanism or as batches using the set_parameter_values function.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">This function returns the output of the execute analysis function.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">AnalysisReadyError in case that the analysis is not ready to be executed. This may be
the case, e.g, when a dependent input parameter is not ready to be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.execute_all">
<em class="property">classmethod </em><code class="descname">execute_all</code><span class="sig-paren">(</span><em>force_update=False</em>, <em>executor=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.execute_all" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute all analysis instances that are currently defined.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>force_update</strong> &#8211; Boolean indicating whether we should force that all analyses are
executed again, even if they have already been run with the same settings before.
False by default.</li>
<li><strong>executor</strong> &#8211; Optional workflow executor to be used for the execution of all analyses.
The executor will be cleared and then all analyses will be added to executor. Default
value is None, in which case the function creates a default executor to be used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The workflow executor used</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement this function to implement the execution of the actual analysis.</p>
<p>This function may not require any input parameters. All input parameters are
recorded in the parameters and dependencies lists and should be retrieved
from there, e.g, using basic slicing self[ paramName ]</p>
<p>Input parameters may be added for internal use ONLY. E.g, we may add parameters that
are used internally to help with parallelization of the execute_analysis function.
Such parameters are not recorded and must be strictly optional so that analysis_base.execute(...)
can call the function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">This function may return any developer-defined data. Note, all
output that should be recorded must be put into the data list.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.execute_recursive">
<code class="descname">execute_recursive</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.execute_recursive" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Recursively execute this analysis and all its dependencies if necessary</p>
<p>We use a workflow driver to control the execution. To define the workflow driver we can set
the self.driver variable. If no workflow driver is given (i.e, self.driver==None), then the
default driver will be created. To change the default driver,
see <cite>omsi.workflow.base.workflow_executor_base.DEFAULT_EXECUTOR_CLASS</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Parameters to be used for the analysis. Parameters may also be set using
the __setitem__ mechanism or as batches using the set_parameter_values function.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Same as execute</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_all_analysis_data">
<code class="descname">get_all_analysis_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_all_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the complete list of all analysis datasets to be written to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_all_dependency_data">
<code class="descname">get_all_dependency_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_all_dependency_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the complete list of all direct dependencies to be written to the HDF5 file</p>
<p>NOTE: These are only the direct dependencies as specified by the analysis itself.
Use  get_all_dependency_data_recursive(..) to also get the indirect dependencies of
the analysis due to dependencies of the dependencies themselves.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of parameter_data objects that define dependencies.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_all_parameter_data">
<code class="descname">get_all_parameter_data</code><span class="sig-paren">(</span><em>exclude_dependencies=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_all_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the complete list of all parameter datasets to be written to the HDF5 file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exclude_dependencies</strong> &#8211; Boolean indicating whether we should exclude parameters
that define dependencies from the list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_all_run_info">
<code class="descname">get_all_run_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_all_run_info" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the dict with the complete info about the last run of the analysis</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_analysis_data">
<code class="descname">get_analysis_data</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the index return the associated dataset to be written to the HDF5 file</p>
<p>:param index : Retrun the index entry of the private member __data_list.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_analysis_data_by_name">
<code class="descname">get_analysis_data_by_name</code><span class="sig-paren">(</span><em>dataname</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_analysis_data_by_name" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the key name of the data return the associated analysis_data object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dataname</strong> &#8211; Name of the analysis data requested from the private __data_list member.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The analysis_data object or None if not found.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_analysis_data_names">
<code class="descname">get_analysis_data_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_analysis_data_names" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of all analysis dataset names.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_analysis_identifier">
<code class="descname">get_analysis_identifier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_analysis_identifier" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the name of the analysis used as key when searching for a particular analysis</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.get_analysis_instances">
<em class="property">classmethod </em><code class="descname">get_analysis_instances</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_analysis_instances" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generator function used to iterate through all instances of analysis_base.
The function creates references for all weak references stored in cls._analysis_instances
and returns the references if it exists and cleans up the any invalid references after the
iteration is complete.
:return: References to analysis_base objects</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_analysis_type">
<code class="descname">get_analysis_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_analysis_type" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return a string indicating the type of analysis performed</p>
</dd></dl>

<dl class="staticmethod">
<dt id="omsi.analysis.base.analysis_base.get_default_dtypes">
<em class="property">static </em><code class="descname">get_default_dtypes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_default_dtypes" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of available default dtypes used for analyses.
Same as <cite>data_dtypes.get_dtypes()</cite>.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="omsi.analysis.base.analysis_base.get_default_parameter_groups">
<em class="property">static </em><code class="descname">get_default_parameter_groups</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_default_parameter_groups" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of commonly used parameter groups and associated descriptions.</p>
<p>Use of default groups provides consistency and allows other system to
design custom behavior around the semantic of parameter groups</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dictionary where the keys are the short names of the groups and the
values are dicts with following keys:value pairs: &#8216;name&#8217; , &#8216;description&#8217;.
Use the &#8216;name&#8217; to define the group to be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_help_string">
<code class="descname">get_help_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_help_string" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a string describing the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Help string describing the analysis and its parameters</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_memory_profile_info">
<code class="descname">get_memory_profile_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_memory_profile_info" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Based on the memory profile of the execute_analysis(..) function get
the string describing the line-by-line memory usage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String describing the memory usage profile. None is returned in case that
no memory profiling data is available.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_num_analysis_data">
<code class="descname">get_num_analysis_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_num_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Retrun the number of analysis datasets to be wirtten to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_num_dependency_data">
<code class="descname">get_num_dependency_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_num_dependency_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the number of dependencies to be wirtten to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_num_parameter_data">
<code class="descname">get_num_parameter_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_num_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the number of parameter datasets to be wirtten to the HDF5 file</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_omsi_analysis_storage">
<code class="descname">get_omsi_analysis_storage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_omsi_analysis_storage" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of known locations where this analysis has been saved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of <cite>omsi.dataformat.omsi_file.analysis. omsi_file_analysis</cite> objects where the analysis is saved.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_parameter_data">
<code class="descname">get_parameter_data</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_parameter_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the index return the associated dataset to be written to the HDF5 file</p>
<p>:param index : Return the index entry of the private member parameters.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_parameter_data_by_name">
<code class="descname">get_parameter_data_by_name</code><span class="sig-paren">(</span><em>dataname</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_parameter_data_by_name" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given the key name of the data return the associated parameter_data object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dataname</strong> &#8211; Name of the parameter requested from the parameters member.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The parameter_data object or None if not found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_parameter_names">
<code class="descname">get_parameter_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_parameter_names" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of all parameter dataset names (including those that may define
dependencies.</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.get_profile_stats_object">
<code class="descname">get_profile_stats_object</code><span class="sig-paren">(</span><em>consolidate=True</em>, <em>stream=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.get_profile_stats_object" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Based on the execution profile of the execute_analysis(..) function get
<code class="docutils literal"><span class="pre">pstats.Stats</span></code> object to help with the interpretation of the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>consolidate</strong> &#8211; Boolean flag indicating whether multiple stats (e.g., from multiple cores)
should be consolidated into a single stats object. Default is True.</li>
<li><strong>stream</strong> &#8211; The optional stream parameter to be used fo the pstats.Stats object.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A single pstats.Stats object if consolidate is True. Otherwise the function
returns a list of pstats.Stats objects, one per recorded statistic. None is returned
in case that the stats objects cannot be created or no profiling data is available.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.has_omsi_analysis_storage">
<code class="descname">has_omsi_analysis_storage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.has_omsi_analysis_storage" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check whether a storage location is known where the anlaysis has been saved.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Boolean indicating whether self.omsi_analysis_storage is not empty</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.keys" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of all valid keys, i.e., a combination of all input parameter and output names.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of strings with all input parameter and output names.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.locate_analysis">
<em class="property">classmethod </em><code class="descname">locate_analysis</code><span class="sig-paren">(</span><em>data_object</em>, <em>include_parameters=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.locate_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given a data_object try to locate the analysis that creates the object as an
output of its execution (and optionally analyses that have the object as an input).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_object</strong> &#8211; The data object of interest.</li>
<li><strong>include_parameters</strong> &#8211; Boolean indicating whether also input parameters should be considered
in the search in addition to the outputs of an analysis</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dependency_dict pointing to the relevant object or None in case the
object was not found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.read_from_omsi_file">
<code class="descname">read_from_omsi_file</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>load_data=True</em>, <em>load_parameters=True</em>, <em>load_runtime_data=True</em>, <em>dependencies_omsi_format=True</em>, <em>ignore_type_conflict=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.read_from_omsi_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function can be optionally overwritten to implement a custom data read.</p>
<p>The default implementation tries to reconstruct the original data as far
as possible, however, in particular in case that a custom add_custom_data_to_omsi_file
function has been implemented, the default implementation may not be sufficient.
The default implementation reconstructs: i) analysis_identifier and reads all
custom data into iii)__data_list. Note, an error will be raised in case that
the analysis type specified in the HDF5 file does not match the analysis type
specified by get_analysis_type()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object associated with the hdf5 data group with             the analysis data_list</li>
<li><strong>load_data</strong> &#8211; Should the analysis data be loaded from file (default) or just stored as h5py data objects</li>
<li><strong>load_parameters</strong> &#8211; Should parameters be loaded from file (default) or just stored as h5py data objects.</li>
<li><strong>load_runtime_data</strong> &#8211; Should runtime data be loaded from file (default) or just stored as h5py data objects</li>
<li><strong>dependencies_omsi_format</strong> &#8211; Should dependencies be loaded as omsi_file API objects (default)
or just as h5py objects.</li>
<li><strong>ignore_type_conflict</strong> &#8211; Set to True to allow the analysis to be loaded into the
current analysis object even if the type indicated in the file does not match the
class. Default value is False. This behavior can be useful when different analysis
have compatible data structures or when we want to load the data in to a generic
analysis container, e.g, analysis_generic.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns bool:</th><td class="field-body"><p class="first">Boolean indicating whether the data was read successfully</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body"><p class="first last">TypeError : A type error will be raised in case that the analysis type specified         by the file does not match the analysis type provided by self.get_analysis_type()</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.record_execute_analysis_outputs">
<code class="descname">record_execute_analysis_outputs</code><span class="sig-paren">(</span><em>analysis_output</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.record_execute_analysis_outputs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Function used internally by execute to record the output
of the custom execute_analysis(...) function to the __data_list.</p>
<p>This function may be overwritten in child classes in order to
customize the behavior for recording data outputs. Eg., for some
analyses one may only want to record a particular set of outputs,
rather than all outputs generated by the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_output</strong> &#8211; The output of the execute_analysis(...) function to be recorded</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.results_ready">
<code class="descname">results_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.results_ready" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Check whether the results of the analysis are ready to be used
:return: Boolean</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.set_analysis_identifier">
<code class="descname">set_analysis_identifier</code><span class="sig-paren">(</span><em>identifier</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.set_analysis_identifier" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set the name of the analysis to identifer</p>
<p>Side Effects: This function modifies self.analysis_identifier</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>identifier</strong> (<em>str</em>) &#8211; The new analysis identifier string to be used (should be unique)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.set_parameter_values">
<code class="descname">set_parameter_values</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.set_parameter_values" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set all parameters given as input to the function. The inputs
are placed in the self.parameters list. If the parameter refers
to an existing h5py.Dataset, h5py.Group,  managed h5py object,
or is an instance of an existing omis_analysi_base object, then
a dependency_dict will be created and stored as value instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Dictionary of keyword arguments. All keys are
expected to be strings. All values are expected to be
either i) numpy arrays, ii) int, float, str or unicode
variables, iii) h5py.Dataset or  h5py.Group, iv) or any
the omsi_file API class objects. For iii) and iv) one
may provide a tuple consisting of the dataobject t[0] and
an additional selection string t[1].</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.update_analysis_parameters">
<code class="descname">update_analysis_parameters</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.update_analysis_parameters" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Record the analysis parameters passed to the execute() function.</p>
<p>The default implementation simply calls the set_parameter_values(...) function.
This function may be overwritten to customize the behavior of how parameters
are recorded by the execute function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Dictionary of keyword arguments with the parameters passed to the execute(..) function</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a
given analysis then this option is used to switch between them for the qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mzSpectra : Array with the static mz values for the spectra.</li>
<li>labelSpectra : Label for the spectral mz axis</li>
<li>mzSlice : Array of the static mz values for the slices or None if identical to the mzSpectra.</li>
<li>labelSlice : Label for the slice mz axis or None if identical to labelSpectra.</li>
<li>values_x: The values for the x axis of the image (or None)</li>
<li>label_x: Label for the x axis of the image</li>
<li>values_y: The values for the y axis of the image (or None)</li>
<li>label_y: Label for the y axis of the image</li>
<li>values_z: The values for the z axis of the image (or None)</li>
<li>label_z: Label for the z axis of the image</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given analysis
then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">numpy array with the data to be displayed in the image slice viewer. Slicing will be
performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">NotImplementedError in case that v_qslice is not supported by the analysis.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qslice.
The default implementation tries to take care of handling the spectra retrieval for all the dependencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.  For most cases
this is not needed here as the support for slice operations is usually a static decission based on
the class type, however, in some cases additional checks may be needed (e.g., ensure that the required
data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty
if the analysis does not support qslice requests (i.e., v_qslice(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<p><strong>Developer Note:</strong> h5py currently supports only a single index list. If the user provides an index-list
for both x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
multiple lists in the selection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following two elements are expected to be returned by this function :</p>
<ol class="arabic simple">
<li>1D, 2D or 3D numpy array of the requested spectra. NOTE: The mass (m/z) axis must be                 the last axis. For index selection x=1,y=1 a 1D array is usually expected. For indexList                 selections x=[0]&amp;y=[1] usually a 2D array is expected. For ragne selections x=0:1&amp;y=1:2 we                 one usually expects a 3D array.</li>
<li>None in case that the spectra axis returned by v_qmz are valid for the returned spectrum.                 Otherwise, return a 1D numpy array with the m/z values for the spectrum (i.e., if custom m/z                 values are needed for interpretation of the returned spectrum).This may be needed, e.g., in                 cases where a per-spectrum peak analysis is performed and the peaks for each spectrum appear                 at different m/z values.</li>
</ol>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.base.analysis_base.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for the analysis for qspectrum.
The default implementation tries to take care of handling the spectra retrieval for all the dependencies
but can naturally not decide how the qspectrum should be handled by a derived class. However, this
implementation is often called at the end of custom implementations to also allow access to data from
other dependencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.
For most cases this is not needed here as the support for slice operations is usually a static decision
based on the class type, however, in some cases additional checks may be needed (e.g., ensure that the
required data is available).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of strings indicating the different available viewer options. The list should be empty if
the analysis does not support qspectrum requests (i.e., v_qspectrum(...) is not available).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.base.analysis_base.write_analysis_data">
<code class="descname">write_analysis_data</code><span class="sig-paren">(</span><em>analysis_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.base.analysis_base.write_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function is used to write the actual analysis data to file. If not implemented, then the
omsi_file_analysis API&#8217;s default behavior is used instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored. May be None on cores that
do not perform any writing but which need to participate in communication, e.g., to collect data
for writing.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-omsi.analysis.generic">
<span id="generic-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">generic</span></code> Module<a class="headerlink" href="#module-omsi.analysis.generic" title="Permalink to this headline">Â¶</a></h2>
<p>Generic analysis class used to represent analyses of unknown type, e.g., when loading
a custom user-defined analysis from file for which the indicate class may not be
available with the local installation. In this case we want to at least be able
to load and investigate the data.</p>
<dl class="class">
<dt id="omsi.analysis.generic.analysis_generic">
<em class="property">class </em><code class="descclassname">omsi.analysis.generic.</code><code class="descname">analysis_generic</code><span class="sig-paren">(</span><em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#omsi.analysis.base.analysis_base" title="omsi.analysis.base.analysis_base"><code class="xref py py-class docutils literal"><span class="pre">omsi.analysis.base.analysis_base</span></code></a></p>
<p>This analysis class is used if the specific anlaysis type is unknown, e.g., when loading
custom user-defined analysis data that may have not be available in the standard
omsi package used.</p>
<p>Initialize the basic data members</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name_key</strong> &#8211; The name for the analysis</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="omsi.analysis.generic.analysis_generic.DEFAULT_OUTPUT_PREFIX">
<code class="descname">DEFAULT_OUTPUT_PREFIX</code><em class="property"> = 'output_'</em><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.DEFAULT_OUTPUT_PREFIX" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="omsi.analysis.generic.analysis_generic.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.execute" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Overwrite the default implementation of execute to update parameter specifications/types
when wrapping functions where the types are not known a priori.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Custom analysis parameters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The result of execute_analysis()</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.generic.analysis_generic.execute_analysis">
<code class="descname">execute_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.execute_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Nothing to do here.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.from_function">
<em class="property">classmethod </em><code class="descname">from_function</code><span class="sig-paren">(</span><em>analysis_function</em>, <em>output_names=None</em>, <em>parameter_specs=None</em>, <em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.from_function" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create a generic analysis class for a given analysis function.</p>
<p>This functionality is useful to ease quick scripting on analyses but should not be used in production.</p>
<p>NOTE: __analysis_function is a reserved parameter name used to store the analysis function and may
not be used as an input parameter for the analysis function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_function</strong> &#8211; The analysis function to be wrapped for provenance tracking and storage</li>
<li><strong>output_names</strong> &#8211; Optionally, define a list of the names of the outputs</li>
<li><strong>parameter_specs</strong> &#8211; Optional list of omsi.datastructures.analysis_data.parameter_data with
additional information about the parameters of the function.</li>
<li><strong>name_key</strong> &#8211; The name for the analysis, i.e., the analysis  identifier</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new generic analysis class</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.get_analysis_type">
<em class="property">classmethod </em><code class="descname">get_analysis_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.get_analysis_type" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return a string indicating the type of analysis performed</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.generic.analysis_generic.get_real_analysis_type">
<code class="descname">get_real_analysis_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.get_real_analysis_type" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This class is designed to handle generic (including unkown) types of analysis.
In cases, e.g., were this class is used to store analysis data from an HDF5
file we may have an actual analysis type available even if we do not have
a special analysis class may not be available in the current installation</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.generic.analysis_generic.read_from_omsi_file">
<code class="descname">read_from_omsi_file</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>load_data=True</em>, <em>load_parameters=True</em>, <em>load_runtime_data=True</em>, <em>dependencies_omsi_format=True</em>, <em>ignore_type_conflict=False</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.read_from_omsi_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>See <cite>omsi.analysis.analysis_base.read_from_omsi_file(...)</cite> for details.
The function is overwritten here mainly to initialize the self.real_analysis_type
instance variable but otherwise uses the default behavior.</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.v_qmz">
<em class="property">classmethod </em><code class="descname">v_qmz</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.v_qmz" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qmz URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.v_qslice">
<em class="property">classmethod </em><code class="descname">v_qslice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.v_qslice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qslice URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.v_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.v_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.v_qspectrum">
<em class="property">classmethod </em><code class="descname">v_qspectrum</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.v_qspectrum" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Implement support for qspectrum URL requests for the viewer</p>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.generic.analysis_generic.v_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">v_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.v_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define which viewer_options are supported for qspectrum URL&#8217;s</p>
</dd></dl>

<dl class="method">
<dt id="omsi.analysis.generic.analysis_generic.write_analysis_data">
<code class="descname">write_analysis_data</code><span class="sig-paren">(</span><em>analysis_group=None</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.analysis_generic.write_analysis_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function is used to write the actual analysis data to file. If not implemented, then the
omsi_file_analysis API&#8217;s default behavior is used instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_group</strong> &#8211; The h5py.Group object where the analysis is stored. May be None on cores that
do not perform any writing but which need to participate in communication, e.g., to collect data
for writing.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="omsi.analysis.generic.bastet_analysis">
<code class="descclassname">omsi.analysis.generic.</code><code class="descname">bastet_analysis</code><span class="sig-paren">(</span><em>output_names=None</em>, <em>parameter_specs=None</em>, <em>name_key='undefined'</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.generic.bastet_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Decorator used to wrap a function and replace it with an analysis_generic object
that behaves like a function but adds the ability for saving the
analysis to file and tracking provenance</p>
<p>This is essentially the same as analysis_generic.from_function(....).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> &#8211; The function to be wrapped</li>
<li><strong>output_names</strong> &#8211; Optional list of strings with the names of the outputs</li>
<li><strong>parameter_specs</strong> &#8211; Optional list of omsi.datastructures.analysis_data.parameter_data with
additional information about the parameters of the function.</li>
<li><strong>name_key</strong> &#8211; Optional name for the analysis, i.e., the analysis identifier</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">analysis_generic instance for the wrapped function</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-omsi.analysis.analysis_views">
<span id="analysis-views-module"></span><h2><code class="xref py py-mod docutils literal"><span class="pre">analysis_views</span></code> Module<a class="headerlink" href="#module-omsi.analysis.analysis_views" title="Permalink to this headline">Â¶</a></h2>
<p>Helper module with functions and classes for interfacing with different
analysis algorithms. Many of these functions are used to ease interaction
with the analysis module in a generic fashion, without having to explicitly
know about all the different available modules, e.g., we can just look
up modules by name and interact with them directly.</p>
<dl class="class">
<dt id="omsi.analysis.analysis_views.analysis_views">
<em class="property">class </em><code class="descclassname">omsi.analysis.analysis_views.</code><code class="descname">analysis_views</code><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Helper class for interfacing different analysis algorithms with the web-based viewer</p>
<p>Nothing to do here.</p>
<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.analysis_name_to_class">
<em class="property">classmethod </em><code class="descname">analysis_name_to_class</code><span class="sig-paren">(</span><em>class_name</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.analysis_name_to_class" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Convert the given string indicating the class to a python class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>class_name</strong> &#8211; Name of the analysis class. This may be a fully qualified
name, e.g., <cite>omsi.analysis.multivariate_stat.omsi_nmf</cite> or a name
relative to the omis.analysis module, e.g, <cite>multivariate_stat.omsi_nmf</cite>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">Attribute error in case that the class cannot be restored.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.available_analysis">
<em class="property">classmethod </em><code class="descname">available_analysis</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.available_analysis" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get all available analysis, i.e., all analysis that are subclasses of
analysis_base.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dictionary where the dict-keys are the full qualified name of the
module and the values are the analysis class corresponding to that
module.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.available_analysis_descriptions">
<em class="property">classmethod </em><code class="descname">available_analysis_descriptions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.available_analysis_descriptions" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get all available analysis, i.e., all analysis that are subclasses of
analysis_base. For each analysis compile the list of input parameters,
outputs, the corresponding class etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dictionary where the dict-keys are the full qualified name of the
module and the values are dicts with class, list of analysis paremeter names,
list of analysis outputs.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.get_axes">
<em class="property">classmethod </em><code class="descname">get_axes</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>qslice_viewer_option=0</em>, <em>qspectrum_viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.get_axes" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get the mz axes for the analysis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>qslice_viewer_option</strong> &#8211; If multiple default viewer behaviors are available for
a given analysis then this option is used to switch between them for the qslice URL pattern.</li>
<li><strong>qspectrum_viewer_option</strong> &#8211; If multiple default viewer behaviors are available
for a given analysis then this option is used to switch between them for the
qspectrum URL pattern.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>The following four arrays are returned by the analysis:</p>
<ul class="simple">
<li>mz_spectra : Array with the static mz values for the spectra.</li>
<li>label_spectra : Lable for the spectral mz axis</li>
<li>mz_slice : Array of the static mz values for the slices or None if identical to the mz_spectra.</li>
<li>label_slice : Lable for the slice mz axis or None if identical to label_spectra.</li>
<li>values_x: The values for the x axis of the image (or None)</li>
<li>label_x: Label for the x axis of the image</li>
<li>values_y: The values for the y axis of the image (or None)</li>
<li>label_y: Label for the y axis of the image</li>
<li>values_z: The values for the z axis of the image (or None)</li>
<li>label_z: Label for the z axis of the image</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.get_qslice_viewer_options">
<em class="property">classmethod </em><code class="descname">get_qslice_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.get_qslice_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for qslice.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Array of strings indicating the different available viewer options.
The array may be empty if now viewer_options are available, i.e., get_slice
and get_spectrum are undefined for the given analysis.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.get_qspectrum_viewer_options">
<em class="property">classmethod </em><code class="descname">get_qspectrum_viewer_options</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.get_qspectrum_viewer_options" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get a list of strings describing the different default viewer options for qspectrum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Array of strings indicating the different available viewer options.
The array may be empty if now viewer_options are available, i.e., get_slice
and get_spectrum are undefined for the given analysis.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.get_slice">
<em class="property">classmethod </em><code class="descname">get_slice</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>z</em>, <em>operations=None</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.get_slice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get 3D analysis dataset for which z-slices should be extracted for presentation
in the OMSI viewer</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>z</strong> &#8211; Selection string indicting which z values should be selected.</li>
<li><strong>operations</strong> &#8211; JSON string with list of dictionaries or a python
list of dictionaries. Each dict specifies a single data
transformation or data reduction that are applied in order.
See omsi.shared.omsi_data_selection.transform_and_reduce_data(...)
for details.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">numpy array with the data to be displayed in the image slice viewer. Slicing
will be performed typically like [:,:,zmin:zmax].</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.get_spectra">
<em class="property">classmethod </em><code class="descname">get_spectra</code><span class="sig-paren">(</span><em>analysis_object</em>, <em>x</em>, <em>y</em>, <em>operations=None</em>, <em>viewer_option=0</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.get_spectra" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get from which 3D analysis spectra in x/y should be extracted for presentation in the OMSI viewer</p>
<p><strong>Developer Note:</strong>
h5py currently supports only a single index list. If the user provides an index-list for both
x and y, then we need to construct the proper merged list and load the data manually, or if
the data is small enough, one can load the full data into a numpy array which supports
multiple lists in the selection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</li>
<li><strong>x</strong> &#8211; x selection string</li>
<li><strong>y</strong> &#8211; y selection string</li>
<li><strong>operations</strong> &#8211; JSON string with list of dictionaries or a python
list of dictionaries. Each dict specifies a single data
transformation or data reduction that are applied in order.
See omsi.shared.omsi_data_selection.transform_and_reduce_data(...)
for details.</li>
<li><strong>viewer_option</strong> &#8211; If multiple default viewer behaviors are available for a given
analysis then this option is used to switch between them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">2D or 3D numpy array of the requested spectra. The mass (m/z) axis must be the last axis.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.supports_slice">
<em class="property">classmethod </em><code class="descname">supports_slice</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.supports_slice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get whether a default slice selection behavior is defined for the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean indicating whether get_slice(...) is defined for the analysis object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="omsi.analysis.analysis_views.analysis_views.supports_spectra">
<em class="property">classmethod </em><code class="descname">supports_spectra</code><span class="sig-paren">(</span><em>analysis_object</em><span class="sig-paren">)</span><a class="headerlink" href="#omsi.analysis.analysis_views.analysis_views.supports_spectra" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Get wheter a default spectra selection behavior is defined for the analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis_object</strong> &#8211; The omsi_file_analysis object for which slicing should be performed.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Boolean indicating whether get_spectra(...) is defined for the analysis object.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">Â¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.findpeaks.html">findpeaks Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#id1"><code class="docutils literal"><span class="pre">findpeaks</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.omsi_findpeaks_global"><code class="docutils literal"><span class="pre">omsi_findpeaks_global</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.omsi_findpeaks_local"><code class="docutils literal"><span class="pre">omsi_findpeaks_local</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.findpeaks.html#findpeaks-third-party-package">findpeaks.third_party Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#id2"><code class="docutils literal"><span class="pre">findpeaks.third_party</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.third_party.findpeaks"><code class="docutils literal"><span class="pre">findpeaks</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.findpeaks.html#findpeaks-experimental-package">findpeaks.experimental Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#id3"><code class="docutils literal"><span class="pre">findpeaks.experimental</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.experimental.omsi_peakcube"><code class="docutils literal"><span class="pre">omsi_peakcube</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.experimental.pfrun"><code class="docutils literal"><span class="pre">pfrun</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.experimental.omsi_lpf"><code class="docutils literal"><span class="pre">omsi_lpf</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.experimental.omsi_npg"><code class="docutils literal"><span class="pre">omsi_npg</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.findpeaks.html#module-omsi.analysis.findpeaks.experimental.mypeakfinder"><code class="docutils literal"><span class="pre">mypeakfinder</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.multivariate_stats.html">multivariate_stats Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#id1"><code class="docutils literal"><span class="pre">multivariate_stats</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#module-omsi.analysis.multivariate_stats.omsi_nmf"><code class="docutils literal"><span class="pre">omsi_nmf</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#multivariate-stats-third-party-package">multivariate_stats.third_party Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#id2"><code class="docutils literal"><span class="pre">multivariate_stats.third_party</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#module-omsi.analysis.multivariate_stats.third_party.nmf"><code class="docutils literal"><span class="pre">nmf</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#multivariate-stats-experimental-package">multivariate_stats.experimental Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.multivariate_stats.html#id5"><code class="docutils literal"><span class="pre">multivariate_stats.experimental</span></code> Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.msi_filtering.html">msi_filtering Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.msi_filtering.html#id1"><code class="docutils literal"><span class="pre">msi_filtering</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.msi_filtering.html#module-omsi.analysis.msi_filtering.omsi_tic_norm"><code class="docutils literal"><span class="pre">omsi_tic_norm</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.msi_filtering.html#msi-filtering-third-party-package">msi_filtering.third_party Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.msi_filtering.html#id2"><code class="docutils literal"><span class="pre">msi_filtering.third_party</span></code> Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.msi_filtering.html#msi-filtering-experimental-package">msi_filtering.experimental Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.msi_filtering.html#id3"><code class="docutils literal"><span class="pre">msi_filtering.experimental</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.msi_filtering.html#module-omsi.analysis.msi_filtering.experimental.omsi_filter_by_mask"><code class="docutils literal"><span class="pre">omsi_filter_by_mask</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.msi_filtering.html#module-omsi.analysis.msi_filtering.experimental.omsi_mask_by_cluster"><code class="docutils literal"><span class="pre">omsi_mask_by_cluster</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.compound_stats.html">compound_stats Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.compound_stats.html#id1"><code class="docutils literal"><span class="pre">compound_stats</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.compound_stats.html#module-omsi.analysis.compound_stats.omsi_score_midas"><code class="docutils literal"><span class="pre">omsi_score_midas</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.compound_stats.html#module-omsi.analysis.compound_stats.omsi_score_pactolus"><code class="docutils literal"><span class="pre">omsi_score_pactolus</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.compound_stats.html#compound-stats-third-party-package">compound_stats.third_party Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.compound_stats.html#id2"><code class="docutils literal"><span class="pre">compound_stats.third_party</span></code> Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omsi.analysis.compound_stats.html#compound-stats-experimental-package">compound_stats.experimental Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="omsi.analysis.compound_stats.html#id3"><code class="docutils literal"><span class="pre">compound_stats.experimental</span></code> Package</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="omsi.analysis.findpeaks.html" class="btn btn-neutral float-right" title="findpeaks Package">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="omsi.html" class="btn btn-neutral" title="omsi Package"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Oliver RÃ¼bel and Ben Bowen.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'devel',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>